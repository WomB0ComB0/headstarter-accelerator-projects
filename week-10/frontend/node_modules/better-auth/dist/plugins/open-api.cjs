"use strict";var De=Object.defineProperty;var Ri=Object.getOwnPropertyDescriptor;var Ti=Object.getOwnPropertyNames;var ki=Object.prototype.hasOwnProperty;var Ui=(e,o)=>{for(var i in o)De(e,i,{get:o[i],enumerable:!0})},Ei=(e,o,i,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of Ti(o))!ki.call(e,r)&&r!==i&&De(e,r,{get:()=>o[r],enumerable:!(t=Ri(o,r))||t.enumerable});return e};var Oi=e=>Ei(De({},"__esModule",{value:!0}),e);var Ut={};Ui(Ut,{openAPI:()=>kt});module.exports=Oi(Ut);var Q=require("zod");var W=(e,o="ms")=>new Date(Date.now()+(o==="sec"?e*1e3:e));var h=require("zod"),We=require("better-call"),xt=h.z.object({id:h.z.string(),providerId:h.z.string(),accountId:h.z.string(),userId:h.z.string(),accessToken:h.z.string().nullish(),refreshToken:h.z.string().nullish(),idToken:h.z.string().nullish(),accessTokenExpiresAt:h.z.date().nullish(),refreshTokenExpiresAt:h.z.date().nullish(),scope:h.z.string().nullish(),password:h.z.string().nullish(),createdAt:h.z.date().default(()=>new Date),updatedAt:h.z.date().default(()=>new Date)}),Dt=h.z.object({id:h.z.string(),email:h.z.string().transform(e=>e.toLowerCase()),emailVerified:h.z.boolean().default(!1),name:h.z.string(),image:h.z.string().nullish(),createdAt:h.z.date().default(()=>new Date),updatedAt:h.z.date().default(()=>new Date)}),St=h.z.object({id:h.z.string(),userId:h.z.string(),expiresAt:h.z.date(),createdAt:h.z.date().default(()=>new Date),updatedAt:h.z.date().default(()=>new Date),token:h.z.string(),ipAddress:h.z.string().nullish(),userAgent:h.z.string().nullish()}),It=h.z.object({id:h.z.string(),value:h.z.string(),createdAt:h.z.date().default(()=>new Date),updatedAt:h.z.date().default(()=>new Date),expiresAt:h.z.date(),identifier:h.z.string()});function Pi(e,o){let i={...o==="user"?e.user?.additionalFields:{},...o==="session"?e.session?.additionalFields:{}};for(let t of e.plugins||[])t.schema&&t.schema[o]&&(i={...i,...t.schema[o].fields});return i}function xi(e,o){let i=o.action||"create",t=o.fields,r={};for(let n in t){if(n in e){if(t[n].input===!1){if(t[n].defaultValue){r[n]=t[n].defaultValue;continue}continue}if(t[n].validator?.input&&e[n]!==void 0){r[n]=t[n].validator.input.parse(e[n]);continue}if(t[n].transform?.input&&e[n]!==void 0){r[n]=t[n].transform?.input(e[n]);continue}r[n]=e[n];continue}if(t[n].defaultValue&&i==="create"){r[n]=t[n].defaultValue;continue}if(t[n].required&&i==="create")throw new We.APIError("BAD_REQUEST",{message:`${n} is required`})}return r}function ye(e,o,i){let t=Pi(e,"user");return xi(o||{},{fields:t,action:i})}var we=Object.create(null),ue=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?we:globalThis),Xe=new Proxy(we,{get(e,o){return ue()[o]??we[o]},has(e,o){let i=ue();return o in i||o in we},set(e,o,i){let t=ue(!0);return t[o]=i,!0},deleteProperty(e,o){if(!o)return!1;let i=ue(!0);return delete i[o],!0},ownKeys(){let e=ue(!0);return Object.keys(e)}});function Di(e){return e?e!=="false":!1}var Se=typeof process<"u"&&process.env&&process.env.NODE_ENV||"";var be=Se==="dev"||Se==="development",Si=Se==="test"||Di(Xe.TEST);function Ie(e){try{return JSON.parse(e)}catch{return null}}var se={isAction:!1};var Je=require("@better-auth/utils/random"),ge=e=>(0,Je.createRandomStringGenerator)("a-z","A-Z","0-9")(e||32);var M=require("zod"),Ne=require("better-call");var X=class extends Error{constructor(o,i){super(o),this.name="BetterAuthError",this.message=o,this.cause=i,this.stack=""}};function ve(e){try{return new URL(e).origin}catch{return null}}function Ye(e){try{return new URL(e).protocol}catch{return null}}function _e(e){return e.includes("://")?new URL(e).host:e}var Fi=require("@better-auth/utils/hash"),ji=require("@noble/ciphers/chacha"),Le=require("@noble/ciphers/utils"),Mi=require("@noble/ciphers/webcrypto");var _i=require("@better-auth/utils/hash");var eo=require("jose");async function oo(e,o,i=3600){return await new eo.SignJWT(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+i).sign(new TextEncoder().encode(o))}var Li=require("@noble/hashes/scrypt"),Ni=require("uncrypto"),Bi=require("@better-auth/utils/hex");var io=require("@better-auth/utils/random"),pe=(0,io.createRandomStringGenerator)("a-z","0-9","A-Z","-_");async function Re(e,o){let i=e.body?.callbackURL||(e.query?.currentURL?ve(e.query?.currentURL):"")||e.context.options.baseURL;if(!i)throw new Ne.APIError("BAD_REQUEST",{message:"callbackURL is required"});let t=pe(128),r=pe(32),n=JSON.stringify({callbackURL:i,codeVerifier:t,errorURL:e.body?.errorCallbackURL||e.query?.currentURL,newUserURL:e.body?.newUserCallbackURL,link:o,expiresAt:Date.now()+10*60*1e3}),a=new Date;a.setMinutes(a.getMinutes()+10);let A=await e.context.internalAdapter.createVerificationValue({value:n,identifier:r,expiresAt:a});if(!A)throw e.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new Ne.APIError("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:A.identifier,codeVerifier:t}}async function to(e){let o=e.query.state||e.body.state,i=await e.context.internalAdapter.findVerificationValue(o);if(!i)throw e.context.logger.error("State Mismatch. Verification not found",{state:o}),e.redirect(`${e.context.baseURL}/error?error=please_restart_the_process`);let t=M.z.object({callbackURL:M.z.string(),codeVerifier:M.z.string(),errorURL:M.z.string().optional(),newUserURL:M.z.string().optional(),expiresAt:M.z.number(),link:M.z.object({email:M.z.string(),userId:M.z.string()}).optional()}).parse(JSON.parse(i.value));if(t.errorURL||(t.errorURL=`${e.context.baseURL}/error`),t.expiresAt<Date.now())throw await e.context.internalAdapter.deleteVerificationValue(i.id),e.context.logger.error("State expired.",{state:o}),e.redirect(`${e.context.baseURL}/error?error=please_restart_the_process`);return await e.context.internalAdapter.deleteVerificationValue(i.id),t}var Be=["info","success","warn","error","debug"];function Vi(e,o){return Be.indexOf(o)<=Be.indexOf(e)}var V={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},qi={info:V.fg.blue,success:V.fg.green,warn:V.fg.yellow,error:V.fg.red,debug:V.fg.magenta},zi=(e,o)=>{let i=new Date().toISOString();return`${V.dim}${i}${V.reset} ${qi[e]}${e.toUpperCase()}${V.reset} ${V.bright}[Better Auth]:${V.reset} ${o}`},ro=e=>{let o=e?.disabled!==!0,i=e?.level??"error",t=(r,n,a=[])=>{if(!o||!Vi(i,r))return;let A=zi(r,n);if(!e||typeof e.log!="function"){r==="error"?console.error(A,...a):r==="warn"?console.warn(A,...a):console.log(A,...a);return}e.log(r==="success"?"info":r,n,...a)};return Object.fromEntries(Be.map(r=>[r,(...[n,...a])=>t(r,n,a)]))},B=ro();var ae=e=>{let o=e.plugins?.reduce((s,K)=>{let c=K.schema;if(!c)return s;for(let[u,l]of Object.entries(c))s[u]={fields:{...s[u]?.fields,...l.fields},modelName:l.modelName||u};return s},{}),i=e.rateLimit?.storage==="database",t={rateLimit:{modelName:e.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",fieldName:e.rateLimit?.fields?.key||"key"},count:{type:"number",fieldName:e.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",fieldName:e.rateLimit?.fields?.lastRequest||"lastRequest"}}}},{user:r,session:n,account:a,...A}=o||{};return{user:{modelName:e.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:e.user?.fields?.name||"name"},email:{type:"string",unique:!0,required:!0,fieldName:e.user?.fields?.email||"email"},emailVerified:{type:"boolean",defaultValue:()=>!1,required:!0,fieldName:e.user?.fields?.emailVerified||"emailVerified"},image:{type:"string",required:!1,fieldName:e.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:e.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:e.user?.fields?.updatedAt||"updatedAt"},...r?.fields,...e.user?.additionalFields},order:1},session:{modelName:e.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:e.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:e.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:e.session?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,fieldName:e.session?.fields?.updatedAt||"updatedAt"},ipAddress:{type:"string",required:!1,fieldName:e.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:e.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:e.session?.fields?.userId||"userId",references:{model:e.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0},...n?.fields,...e.session?.additionalFields},order:2},account:{modelName:e.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:e.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:e.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:e.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:e.account?.fields?.userId||"userId"},accessToken:{type:"string",required:!1,fieldName:e.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,fieldName:e.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,fieldName:e.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,fieldName:e.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,fieldName:e.account?.fields?.accessTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:e.account?.fields?.scope||"scope"},password:{type:"string",required:!1,fieldName:e.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:e.account?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,fieldName:e.account?.fields?.updatedAt||"updatedAt"},...a?.fields},order:3},verification:{modelName:e.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:e.verification?.fields?.identifier||"identifier"},value:{type:"string",required:!0,fieldName:e.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:e.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!1,defaultValue:()=>new Date,fieldName:e.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!1,defaultValue:()=>new Date,fieldName:e.verification?.fields?.updatedAt||"updatedAt"}},order:4},...A,...i?t:{}}};var $i=require("zod");var no=require("kysely"),Fe=require("kysely");var x=require("better-call");var Me=require("better-call");var oe=require("better-call"),so=(0,oe.createMiddleware)(async()=>({})),Ae=(0,oe.createMiddlewareCreator)({use:[so,(0,oe.createMiddleware)(async()=>({}))]}),C=(0,oe.createEndpointCreator)({use:[so]});function je(e){return e==="-"||e==="^"||e==="$"||e==="+"||e==="."||e==="("||e===")"||e==="|"||e==="["||e==="]"||e==="{"||e==="}"||e==="*"||e==="?"||e==="\\"?`\\${e}`:e}function Gi(e){let o="";for(let i=0;i<e.length;i++)o+=je(e[i]);return o}function ao(e,o=!0){if(Array.isArray(e))return`(?:${e.map(c=>`^${ao(c,o)}$`).join("|")})`;let i="",t="",r=".";o===!0?(i="/",t="[/\\\\]",r="[^/\\\\]"):o&&(i=o,t=Gi(i),t.length>1?(t=`(?:${t})`,r=`((?!${t}).)`):r=`[^${t}]`);let n=o?`${t}+?`:"",a=o?`${t}*?`:"",A=o?e.split(i):[e],s="";for(let K=0;K<A.length;K++){let c=A[K],u=A[K+1],l="";if(!(!c&&K>0)){if(o&&(K===A.length-1?l=a:u!=="**"?l=n:l=""),o&&c==="**"){l&&(s+=K===0?"":l,s+=`(?:${r}*?${l})*?`);continue}for(let d=0;d<c.length;d++){let y=c[d];y==="\\"?d<c.length-1&&(s+=je(c[d+1]),d++):y==="?"?s+=r:y==="*"?s+=`${r}*?`:s+=je(y)}s+=l}}return s}function Wi(e,o){if(typeof o!="string")throw new TypeError(`Sample must be a string, but ${typeof o} given`);return e.test(o)}function Te(e,o){if(typeof e!="string"&&!Array.isArray(e))throw new TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof e} given`);if((typeof o=="string"||typeof o=="boolean")&&(o={separator:o}),arguments.length===2&&!(typeof o>"u"||typeof o=="object"&&o!==null&&!Array.isArray(o)))throw new TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof o} given`);if(o=o||{},o.separator==="\\")throw new Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let i=ao(e,o.separator),t=new RegExp(`^${i}$`,o.flags),r=Wi.bind(null,t);return r.options=o,r.pattern=e,r.regexp=t,r}var Xi=Ae(async e=>{if(e.request?.method!=="POST")return;let{body:o,query:i,context:t}=e,r=e.headers?.get("origin")||e.headers?.get("referer")||"",n=o?.callbackURL||i?.callbackURL,a=o?.redirectTo,A=i?.currentURL,s=o?.errorCallbackURL,K=o?.newUserCallbackURL,c=t.trustedOrigins,u=e.headers?.has("cookie"),l=(y,b)=>{if(y.startsWith("/"))return!1;if(b.includes("*"))return Te(b)(_e(y));let E=Ye(y);return E==="http:"||E==="https:"||!E?b===ve(y):y.startsWith(b)},d=(y,b)=>{if(!y)return;if(!c.some(j=>l(y,j)||y?.startsWith("/")&&b!=="origin"&&!y.includes(":")))throw e.context.logger.error(`Invalid ${b}: ${y}`),e.context.logger.info(`If it's a valid URL, please add ${y} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${c}`),new Me.APIError("FORBIDDEN",{message:`Invalid ${b}`})};u&&!e.context.options.advanced?.disableCSRFCheck&&d(r,"origin"),n&&d(n,"callbackURL"),a&&d(a,"redirectURL"),A&&d(A,"currentURL"),s&&d(s,"errorCallbackURL"),K&&d(K,"newUserCallbackURL")}),Ke=e=>Ae(async o=>{let{context:i}=o,t=e(o),r=i.trustedOrigins,n=(A,s)=>A.startsWith("/")?!1:s.includes("*")?Te(s)(_e(A)):A.startsWith(s);t&&((A,s)=>{if(!A)return;if(!r.some(c=>n(A,c)||A?.startsWith("/")&&s!=="origin"&&!A.includes(":")))throw o.context.logger.error(`Invalid ${s}: ${A}`),o.context.logger.info(`If it's a valid URL, please add ${A} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${r}`),new Me.APIError("FORBIDDEN",{message:`Invalid ${s}`})})(t,"callbackURL")});var P=require("better-call"),U=require("zod");var Ao=require("@better-auth/utils/base64");var Ko=require("@better-auth/utils/hmac");async function Ve(e,o){if(e.context.options.session?.cookieCache?.enabled){let t=Ao.base64Url.encode(JSON.stringify({session:o,expiresAt:W(e.context.authCookies.sessionData.options.maxAge||60,"sec").getTime(),signature:await(0,Ko.createHMAC)("SHA-256","base64urlnopad").sign(e.context.secret,JSON.stringify(o))}),{padding:!1});if(t.length>4093)throw new X("Session data is too large to store in the cookie. Please disable session cookie caching or reduce the size of the session data");e.setCookie(e.context.authCookies.sessionData.name,t,e.context.authCookies.sessionData.options)}}async function S(e,o,i,t){let r=e.context.authCookies.sessionToken.options,n=i?void 0:e.context.sessionConfig.expiresIn;await e.setSignedCookie(e.context.authCookies.sessionToken.name,o.session.token,e.context.secret,{...r,maxAge:n,...t}),i&&await e.setSignedCookie(e.context.authCookies.dontRememberToken.name,"true",e.context.secret,e.context.authCookies.dontRememberToken.options),await Ve(e,o),e.context.setNewSession(o),e.context.options.secondaryStorage&&await e.context.secondaryStorage?.set(o.session.token,JSON.stringify({user:o.user,session:o.session}),Math.floor((new Date(o.session.expiresAt).getTime()-Date.now())/1e3))}function q(e){e.setCookie(e.context.authCookies.sessionToken.name,"",{...e.context.authCookies.sessionToken.options,maxAge:0}),e.setCookie(e.context.authCookies.sessionData.name,"",{...e.context.authCookies.sessionData.options,maxAge:0}),e.setCookie(e.context.authCookies.dontRememberToken.name,"",{...e.context.authCookies.dontRememberToken.options,maxAge:0})}var Ji=Object.defineProperty,Yi=Object.defineProperties,et=Object.getOwnPropertyDescriptors,co=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,lo=(e,o,i)=>o in e?Ji(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i,ie=(e,o)=>{for(var i in o||(o={}))ot.call(o,i)&&lo(e,i,o[i]);if(co)for(var i of co(o))it.call(o,i)&&lo(e,i,o[i]);return e},te=(e,o)=>Yi(e,et(o)),tt=class extends Error{constructor(e,o,i){super(o||e.toString(),{cause:i}),this.status=e,this.statusText=o,this.error=i}},rt=async(e,o)=>{var i,t,r,n,a,A;let s=o||{},K={onRequest:[o?.onRequest],onResponse:[o?.onResponse],onSuccess:[o?.onSuccess],onError:[o?.onError],onRetry:[o?.onRetry]};if(!o||!o?.plugins)return{url:e,options:s,hooks:K};for(let c of o?.plugins||[]){if(c.init){let u=await((i=c.init)==null?void 0:i.call(c,e.toString(),o));s=u.options||s,e=u.url}K.onRequest.push((t=c.hooks)==null?void 0:t.onRequest),K.onResponse.push((r=c.hooks)==null?void 0:r.onResponse),K.onSuccess.push((n=c.hooks)==null?void 0:n.onSuccess),K.onError.push((a=c.hooks)==null?void 0:a.onError),K.onRetry.push((A=c.hooks)==null?void 0:A.onRetry)}return{url:e,options:s,hooks:K}},uo=class{constructor(e){this.options=e}shouldAttemptRetry(e,o){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(o)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},nt=class{constructor(e){this.options=e}shouldAttemptRetry(e,o){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(o)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}};function st(e){if(typeof e=="number")return new uo({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new uo(e);case"exponential":return new nt(e);default:throw new Error("Invalid retry strategy")}}var at=e=>{let o={},i=t=>typeof t=="function"?t():t;if(e?.auth){if(e.auth.type==="Bearer"){let t=i(e.auth.token);if(!t)return o;o.authorization=`Bearer ${t}`}else if(e.auth.type==="Basic"){let t=i(e.auth.username),r=i(e.auth.password);if(!t||!r)return o;o.authorization=`Basic ${btoa(`${t}:${r}`)}`}else if(e.auth.type==="Custom"){let t=i(e.auth.value);if(!t)return o;o.authorization=`${i(e.auth.prefix)} ${t}`}}return o},fo=["get","post","put","patch","delete"];var At=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Kt(e){let o=e.headers.get("content-type"),i=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!o)return"json";let t=o.split(";").shift()||"";return At.test(t)?"json":i.has(t)||t.startsWith("text/")?"text":"blob"}function dt(e){try{return JSON.parse(e),!0}catch{return!1}}function mo(e){if(e===void 0)return!1;let o=typeof e;return o==="string"||o==="number"||o==="boolean"||o===null?!0:o!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}function go(e){try{return JSON.parse(e)}catch{return e}}function po(e){return typeof e=="function"}function ct(e){if(e?.customFetchImpl)return e.customFetchImpl;if(typeof globalThis<"u"&&po(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&po(window.fetch))return window.fetch;throw new Error("No fetch implementation found")}function lt(e){let o=new Headers(e?.headers),i=at(e);for(let[t,r]of Object.entries(i||{}))o.set(t,r);if(!o.has("content-type")){let t=ut(e?.body);t&&o.set("content-type",t)}return o}function ut(e){return mo(e)?"application/json":null}function gt(e){if(!e?.body)return null;let o=new Headers(e?.headers);return mo(e.body)&&!o.has("content-type")?JSON.stringify(e.body):e.body}function pt(e,o){var i;if(o?.method)return o.method.toUpperCase();if(e.startsWith("@")){let t=(i=e.split("@")[1])==null?void 0:i.split("/")[0];return fo.includes(t)?t.toUpperCase():o?.body?"POST":"GET"}return o?.body?"POST":"GET"}function ft(e,o){let i;return!e?.signal&&e?.timeout&&(i=setTimeout(()=>o?.abort(),e?.timeout)),{abortTimeout:i,clearTimeout:()=>{i&&clearTimeout(i)}}}function mt(e,o){let{baseURL:i,params:t,query:r}=o||{query:{},params:{},baseURL:""},n=e.startsWith("http")?e.split("/").slice(0,3).join("/"):i;if(!n)throw new TypeError(`Invalid URL ${e}. Are you passing in a relative URL but not setting the baseURL?`);if(e.startsWith("@")){let u=e.toString().split("@")[1].split("/")[0];fo.includes(u)&&(e=e.replace(`@${u}/`,"/"))}n.endsWith("/")||(n+="/");let[a,A]=e.replace(n,"").split("?"),s=new URLSearchParams(A);for(let[u,l]of Object.entries(r||{}))s.set(u,String(l));if(t)if(Array.isArray(t)){let u=a.split("/").filter(l=>l.startsWith(":"));for(let[l,d]of u.entries()){let y=t[l];a=a.replace(d,y)}}else for(let[u,l]of Object.entries(t))a=a.replace(`:${u}`,String(l));a=a.split("/").map(encodeURIComponent).join("/"),a.startsWith("/")&&(a=a.slice(1));let K=s.size>0?`?${s}`.replace(/\+/g,"%20"):"";return new URL(`${a}${K}`,n)}var w=async(e,o)=>{var i,t,r,n,a,A,s,K;let{hooks:c,url:u,options:l}=await rt(e,o),d=ct(l),y=new AbortController,b=(i=l.signal)!=null?i:y.signal,E=mt(u,l),j=gt(l),I=lt(l),g=pt(u,l),f=te(ie({},l),{url:E,headers:I,body:j,method:g,signal:b});for(let N of c.onRequest)if(N){let D=await N(f);D instanceof Object&&(f=D)}("pipeTo"in f&&typeof f.pipeTo=="function"||typeof((t=o?.body)==null?void 0:t.pipe)=="function")&&("duplex"in f||(f.duplex="half"));let{clearTimeout:O}=ft(l,y),m=await d(f.url,f);O();let he={response:m,request:f};for(let N of c.onResponse)if(N){let D=await N(te(ie({},he),{response:(r=o?.hookOptions)!=null&&r.cloneResponse?m.clone():m}));D instanceof Response?m=D:D instanceof Object&&(m=D.response)}if(m.ok){if(!(f.method!=="HEAD"))return{data:"",error:null};let D=Kt(m),Z={data:"",response:m,request:f};if(D==="json"||D==="text"){let G=await m.text(),vi=await((n=f.jsonParser)!=null?n:go)(G);Z.data=vi}else Z.data=await m[D]();f?.output&&f.output&&!f.disableValidation&&(Z.data=f.output.parse(Z.data));for(let G of c.onSuccess)G&&await G(te(ie({},Z),{response:(a=o?.hookOptions)!=null&&a.cloneResponse?m.clone():m}));return o?.throw?Z.data:{data:Z.data,error:null}}let wi=(A=o?.jsonParser)!=null?A:go,Ge=await m.text(),xe=dt(Ge)?await wi(Ge):{},bi={response:m,request:f,error:te(ie({},xe),{status:m.status,statusText:m.statusText})};for(let N of c.onError)N&&await N(te(ie({},bi),{response:(s=o?.hookOptions)!=null&&s.cloneResponse?m.clone():m}));if(o?.retry){let N=st(o.retry),D=(K=o.retryAttempt)!=null?K:0;if(await N.shouldAttemptRetry(D,m)){for(let G of c.onRetry)G&&await G(he);let Z=N.getDelay(D);return await new Promise(G=>setTimeout(G,Z)),await w(e,te(ie({},o),{retryAttempt:D+1}))}}if(o?.throw)throw new tt(m.status,m.statusText,xe);return{data:null,error:te(ie({},xe),{status:m.status,statusText:m.statusText})}};var wo=require("better-call"),J=require("jose");var Co=require("@better-auth/utils/hash"),ho=require("@better-auth/utils/base64");async function yo(e){let o=await(0,Co.createHash)("SHA-256").digest(e);return ho.base64Url.encode(new Uint8Array(o),{padding:!1})}function ke(e){return{tokenType:e.token_type,accessToken:e.access_token,refreshToken:e.refresh_token,accessTokenExpiresAt:e.expires_in?W(e.expires_in,"sec"):void 0,scopes:e?.scope?typeof e.scope=="string"?e.scope.split(" "):e.scope:[],idToken:e.id_token}}async function R({id:e,options:o,authorizationEndpoint:i,state:t,codeVerifier:r,scopes:n,claims:a,redirectURI:A,duration:s}){let K=new URL(i);if(K.searchParams.set("response_type","code"),K.searchParams.set("client_id",o.clientId),K.searchParams.set("state",t),K.searchParams.set("scope",n.join(" ")),K.searchParams.set("redirect_uri",o.redirectURI||A),r){let c=await yo(r);K.searchParams.set("code_challenge_method","S256"),K.searchParams.set("code_challenge",c)}if(a){let c=a.reduce((u,l)=>(u[l]=null,u),{});K.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...c}}))}return s&&K.searchParams.set("duration",s),K}var Ct=require("jose");async function v({code:e,codeVerifier:o,redirectURI:i,options:t,tokenEndpoint:r,authentication:n}){let a=new URLSearchParams,A={"content-type":"application/x-www-form-urlencoded",accept:"application/json","user-agent":"better-auth"};if(a.set("grant_type","authorization_code"),a.set("code",e),o&&a.set("code_verifier",o),a.set("redirect_uri",i),n==="basic"){let u=btoa(`${t.clientId}:${t.clientSecret}`);A.authorization=`Basic ${u}`}else a.set("client_id",t.clientId),a.set("client_secret",t.clientSecret);let{data:s,error:K}=await w(r,{method:"POST",body:a,headers:A});if(K)throw K;return ke(s)}var bo=e=>{let o="https://appleid.apple.com/auth/token";return{id:"apple",name:"Apple",createAuthorizationURL({state:i,scopes:t,redirectURI:r}){let n=t||["email","name"];return e.scope&&n.push(...e.scope),new URL(`https://appleid.apple.com/auth/authorize?client_id=${e.clientId}&response_type=code&redirect_uri=${e.redirectURI||r}&scope=${n.join(" ")}&state=${i}&response_mode=form_post`)},validateAuthorizationCode:async({code:i,codeVerifier:t,redirectURI:r})=>v({code:i,codeVerifier:t,redirectURI:e.redirectURI||r,options:e,tokenEndpoint:o}),async verifyIdToken(i,t){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(i,t);let r=(0,J.decodeProtectedHeader)(i),{kid:n,alg:a}=r;if(!n||!a)return!1;let A=await ht(n),{payload:s}=await(0,J.jwtVerify)(i,A,{algorithms:[a],issuer:"https://appleid.apple.com",audience:e.appBundleIdentifier||e.clientId,maxTokenAge:"1h"});return["email_verified","is_private_email"].forEach(K=>{s[K]!==void 0&&(s[K]=!!s[K])}),t&&s.nonce!==t?!1:!!s},async getUserInfo(i){if(e.getUserInfo)return e.getUserInfo(i);if(!i.idToken)return null;let t=(0,J.decodeJwt)(i.idToken);if(!t)return null;let r=t.user?`${t.user.name.firstName} ${t.user.name.lastName}`:t.email,n=await e.mapProfileToUser?.(t);return{user:{id:t.sub,name:r,emailVerified:!1,email:t.email,...n},data:t}}}},ht=async e=>{let o="https://appleid.apple.com",i="/auth/keys",{data:t}=await w(`${o}${i}`);if(!t?.keys)throw new wo.APIError("BAD_REQUEST",{message:"Keys not found"});let r=t.keys.find(n=>n.kid===e);if(!r)throw new Error(`JWK with kid ${e} not found`);return await(0,J.importJWK)(r,r.alg)};var vo=e=>({id:"discord",name:"Discord",createAuthorizationURL({state:o,scopes:i,redirectURI:t}){let r=i||["identify","email"];return e.scope&&r.push(...e.scope),new URL(`https://discord.com/api/oauth2/authorize?scope=${r.join("+")}&response_type=code&client_id=${e.clientId}&redirect_uri=${encodeURIComponent(e.redirectURI||t)}&state=${o}&prompt=${e.prompt||"none"}`)},validateAuthorizationCode:async({code:o,redirectURI:i})=>v({code:o,redirectURI:e.redirectURI||i,options:e,tokenEndpoint:"https://discord.com/api/oauth2/token"}),async getUserInfo(o){if(e.getUserInfo)return e.getUserInfo(o);let{data:i,error:t}=await w("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${o.accessToken}`}});if(t)return null;if(i.avatar===null){let n=i.discriminator==="0"?Number(BigInt(i.id)>>BigInt(22))%6:parseInt(i.discriminator)%5;i.image_url=`https://cdn.discordapp.com/embed/avatars/${n}.png`}else{let n=i.avatar.startsWith("a_")?"gif":"png";i.image_url=`https://cdn.discordapp.com/avatars/${i.id}/${i.avatar}.${n}`}let r=await e.mapProfileToUser?.(i);return{user:{id:i.id,name:i.display_name||i.username||"",email:i.email,emailVerified:i.verified,image:i.image_url,...r},data:i}}});var Ro=e=>({id:"facebook",name:"Facebook",async createAuthorizationURL({state:o,scopes:i,redirectURI:t}){let r=i||["email","public_profile"];return e.scope&&r.push(...e.scope),await R({id:"facebook",options:e,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:r,state:o,redirectURI:t})},validateAuthorizationCode:async({code:o,redirectURI:i})=>v({code:o,redirectURI:e.redirectURI||i,options:e,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"}),async getUserInfo(o){if(e.getUserInfo)return e.getUserInfo(o);let i=["id","name","email","picture",...e?.fields||[]],{data:t,error:r}=await w("https://graph.facebook.com/me?fields="+i.join(","),{auth:{type:"Bearer",token:o.accessToken}});if(r)return null;let n=await e.mapProfileToUser?.(t);return{user:{id:t.id,name:t.name,email:t.email,image:t.picture.data.url,emailVerified:t.email_verified,...n},data:t}}});var To=e=>{let o="https://github.com/login/oauth/access_token";return{id:"github",name:"GitHub",createAuthorizationURL({state:i,scopes:t,codeVerifier:r,redirectURI:n}){let a=t||["user:email"];return e.scope&&a.push(...e.scope),R({id:"github",options:e,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:a,state:i,redirectURI:n})},validateAuthorizationCode:async({code:i,redirectURI:t})=>v({code:i,redirectURI:e.redirectURI||t,options:e,tokenEndpoint:o}),async getUserInfo(i){if(e.getUserInfo)return e.getUserInfo(i);let{data:t,error:r}=await w("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${i.accessToken}`}});if(r)return null;let n=!1,{data:a}=await w("https://api.github.com/user/emails",{headers:{authorization:`Bearer ${i.accessToken}`,"User-Agent":"better-auth"}});a&&(t.email=(a.find(s=>s.primary)??a[0])?.email,n=a.find(s=>s.email===t.email)?.verified??!1);let A=await e.mapProfileToUser?.(t);return{user:{id:t.id.toString(),name:t.name||t.login,email:t.email,image:t.avatar_url,emailVerified:n,...A},data:t}}}};var ko=require("jose");var Uo=e=>({id:"google",name:"Google",async createAuthorizationURL({state:o,scopes:i,codeVerifier:t,redirectURI:r}){if(!e.clientId||!e.clientSecret)throw B.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new X("CLIENT_ID_AND_SECRET_REQUIRED");if(!t)throw new X("codeVerifier is required for Google");let n=i||["email","profile","openid"];e.scope&&n.push(...e.scope);let a=await R({id:"google",options:e,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:n,state:o,codeVerifier:t,redirectURI:r});return e.accessType&&a.searchParams.set("access_type",e.accessType),e.prompt&&a.searchParams.set("prompt",e.prompt),e.display&&a.searchParams.set("display",e.display),e.hd&&a.searchParams.set("hd",e.hd),a},validateAuthorizationCode:async({code:o,codeVerifier:i,redirectURI:t})=>v({code:o,codeVerifier:i,redirectURI:e.redirectURI||t,options:e,tokenEndpoint:"https://oauth2.googleapis.com/token"}),async verifyIdToken(o,i){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(o,i);let t=`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${o}`,{data:r}=await w(t);return r?r.aud===e.clientId&&r.iss==="https://accounts.google.com":!1},async getUserInfo(o){if(e.getUserInfo)return e.getUserInfo(o);if(!o.idToken)return null;let i=(0,ko.decodeJwt)(o.idToken),t=await e.mapProfileToUser?.(i);return{user:{id:i.sub,name:i.name,email:i.email,image:i.picture,emailVerified:i.email_verified,...t},data:i}}});var Eo=require("jose"),Oo=e=>{let o=e.tenantId||"common",i=`https://login.microsoftonline.com/${o}/oauth2/v2.0/authorize`,t=`https://login.microsoftonline.com/${o}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(r){let n=r.scopes||["openid","profile","email","User.Read"];return e.scope&&n.push(...e.scope),R({id:"microsoft",options:e,authorizationEndpoint:i,state:r.state,codeVerifier:r.codeVerifier,scopes:n,redirectURI:r.redirectURI})},validateAuthorizationCode({code:r,codeVerifier:n,redirectURI:a}){return v({code:r,codeVerifier:n,redirectURI:e.redirectURI||a,options:e,tokenEndpoint:t})},async getUserInfo(r){if(e.getUserInfo)return e.getUserInfo(r);if(!r.idToken)return null;let n=(0,Eo.decodeJwt)(r.idToken),a=e.profilePhotoSize||48;await w(`https://graph.microsoft.com/v1.0/me/photos/${a}x${a}/$value`,{headers:{Authorization:`Bearer ${r.accessToken}`},async onResponse(s){if(!(e.disableProfilePhoto||!s.response.ok))try{let c=await s.response.clone().arrayBuffer(),u=Buffer.from(c).toString("base64");n.picture=`data:image/jpeg;base64, ${u}`}catch(K){B.error(K&&typeof K=="object"&&"name"in K?K.name:"",K)}}});let A=await e.mapProfileToUser?.(n);return{user:{id:n.sub,name:n.name,email:n.email,image:n.picture,emailVerified:!0,...A},data:n}}}};var Po=e=>({id:"spotify",name:"Spotify",createAuthorizationURL({state:o,scopes:i,codeVerifier:t,redirectURI:r}){let n=i||["user-read-email"];return e.scope&&n.push(...e.scope),R({id:"spotify",options:e,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:n,state:o,codeVerifier:t,redirectURI:r})},validateAuthorizationCode:async({code:o,codeVerifier:i,redirectURI:t})=>v({code:o,codeVerifier:i,redirectURI:e.redirectURI||t,options:e,tokenEndpoint:"https://accounts.spotify.com/api/token"}),async getUserInfo(o){if(e.getUserInfo)return e.getUserInfo(o);let{data:i,error:t}=await w("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${o.accessToken}`}});if(t)return null;let r=await e.mapProfileToUser?.(i);return{user:{id:i.id,name:i.display_name,email:i.email,image:i.images[0]?.url,emailVerified:!1,...r},data:i}}});var xo=require("jose"),Do=e=>({id:"twitch",name:"Twitch",createAuthorizationURL({state:o,scopes:i,redirectURI:t}){let r=i||["user:read:email","openid"];return e.scope&&r.push(...e.scope),R({id:"twitch",redirectURI:t,options:e,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:r,state:o,claims:e.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:o,redirectURI:i})=>v({code:o,redirectURI:e.redirectURI||i,options:e,tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),async getUserInfo(o){if(e.getUserInfo)return e.getUserInfo(o);let i=o.idToken;if(!i)return B.error("No idToken found in token"),null;let t=(0,xo.decodeJwt)(i),r=await e.mapProfileToUser?.(t);return{user:{id:t.sub,name:t.preferred_username,email:t.email,image:t.picture,emailVerified:!1,...r},data:t}}});var So=e=>({id:"twitter",name:"Twitter",createAuthorizationURL(o){let i=o.scopes||["users.read","tweet.read","offline.access"];return e.scope&&i.push(...e.scope),R({id:"twitter",options:e,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:i,state:o.state,codeVerifier:o.codeVerifier,redirectURI:o.redirectURI})},validateAuthorizationCode:async({code:o,codeVerifier:i,redirectURI:t})=>v({code:o,codeVerifier:i,authentication:"basic",redirectURI:e.redirectURI||t,options:e,tokenEndpoint:"https://api.x.com/2/oauth2/token"}),async getUserInfo(o){if(e.getUserInfo)return e.getUserInfo(o);let{data:i,error:t}=await w("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${o.accessToken}`}});if(t)return null;let r=await e.mapProfileToUser?.(i);return{user:{id:i.data.id,name:i.data.name,email:i.data.username||null,image:i.data.profile_image_url,emailVerified:i.data.verified||!1,...r},data:i}}});var Io=e=>{let o="https://api.dropboxapi.com/oauth2/token";return{id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:i,scopes:t,codeVerifier:r,redirectURI:n})=>{let a=t||["account_info.read"];return e.scope&&a.push(...e.scope),await R({id:"dropbox",options:e,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:a,state:i,redirectURI:n,codeVerifier:r})},validateAuthorizationCode:async({code:i,codeVerifier:t,redirectURI:r})=>await v({code:i,codeVerifier:t,redirectURI:e.redirectURI||r,options:e,tokenEndpoint:o}),async getUserInfo(i){if(e.getUserInfo)return e.getUserInfo(i);let{data:t,error:r}=await w("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${i.accessToken}`}});if(r)return null;let n=await e.mapProfileToUser?.(t);return{user:{id:t.account_id,name:t.name?.display_name,email:t.email,emailVerified:t.email_verified||!1,image:t.profile_photo_url,...n},data:t}}}};var _o=e=>{let o="https://www.linkedin.com/oauth/v2/authorization",i="https://www.linkedin.com/oauth/v2/accessToken";return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:t,scopes:r,redirectURI:n})=>{let a=r||["profile","email","openid"];return e.scope&&a.push(...e.scope),await R({id:"linkedin",options:e,authorizationEndpoint:o,scopes:a,state:t,redirectURI:n})},validateAuthorizationCode:async({code:t,redirectURI:r})=>await v({code:t,redirectURI:e.redirectURI||r,options:e,tokenEndpoint:i}),async getUserInfo(t){let{data:r,error:n}=await w("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let a=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name,email:r.email,emailVerified:r.email_verified||!1,image:r.picture,...a},data:r}}}};var qe=(e="")=>e.split("://").map(o=>o.replace(/\/{2,}/g,"/")).join("://"),yt=e=>{let o=e||"https://gitlab.com";return{authorizationEndpoint:qe(`${o}/oauth/authorize`),tokenEndpoint:qe(`${o}/oauth/token`),userinfoEndpoint:qe(`${o}/api/v4/user`)}},Lo=e=>{let{authorizationEndpoint:o,tokenEndpoint:i,userinfoEndpoint:t}=yt(e.issuer),r="gitlab";return{id:r,name:"Gitlab",createAuthorizationURL:async({state:a,scopes:A,codeVerifier:s,redirectURI:K})=>{let c=A||["read_user"];return e.scope&&c.push(...e.scope),await R({id:r,options:e,authorizationEndpoint:o,scopes:c,state:a,redirectURI:K,codeVerifier:s})},validateAuthorizationCode:async({code:a,redirectURI:A,codeVerifier:s})=>v({code:a,redirectURI:e.redirectURI||A,options:e,codeVerifier:s,tokenEndpoint:i}),async getUserInfo(a){if(e.getUserInfo)return e.getUserInfo(a);let{data:A,error:s}=await w(t,{headers:{authorization:`Bearer ${a.accessToken}`}});if(s||A.state!=="active"||A.locked)return null;let K=await e.mapProfileToUser?.(A);return{user:{id:A.id.toString(),name:A.name??A.username,email:A.email,image:A.avatar_url,emailVerified:!0,...K},data:A}}}};var No=e=>({id:"reddit",name:"Reddit",createAuthorizationURL({state:o,scopes:i,redirectURI:t}){let r=i||["identity"];return e.scope&&r.push(...e.scope),R({id:"reddit",options:e,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:r,state:o,redirectURI:t,duration:e.duration})},validateAuthorizationCode:async({code:o,redirectURI:i})=>{let t=new URLSearchParams({grant_type:"authorization_code",code:o,redirect_uri:e.redirectURI||i}),r={"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${Buffer.from(`${e.clientId}:${e.clientSecret}`).toString("base64")}`},{data:n,error:a}=await w("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:r,body:t.toString()});if(a)throw a;return ke(n)},async getUserInfo(o){if(e.getUserInfo)return e.getUserInfo(o);let{data:i,error:t}=await w("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${o.accessToken}`,"User-Agent":"better-auth"}});if(t)return null;let r=await e.mapProfileToUser?.(i);return{user:{id:i.id,name:i.name,email:i.oauth_client_id,emailVerified:i.has_verified_email,image:i.icon_img?.split("?")[0],...r},data:i}}});var Bo=require("zod"),wt={apple:bo,discord:vo,facebook:Ro,github:To,microsoft:Oo,google:Uo,spotify:Po,twitch:Do,twitter:So,dropbox:Io,linkedin:_o,gitlab:Lo,reddit:No},ze=Object.keys(wt),Fo=Bo.z.enum(ze,{description:"OAuth2 provider to use"});var F=require("zod");var de=require("better-call");var z=require("better-call");var Y=require("zod");var p={USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found"};var jo=require("@better-auth/utils/hmac"),Mo=require("@better-auth/utils/base64"),Vo=require("@better-auth/utils/binary"),He=()=>C("/get-session",{method:"GET",query:Y.z.optional(Y.z.object({disableCookieCache:Y.z.boolean({description:"Disable cookie cache and fetch session from database"}).or(Y.z.string().transform(e=>e==="true")).optional(),disableRefresh:Y.z.boolean({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()})),requireHeaders:!0,metadata:{openapi:{description:"Get the current session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{session:{type:"object",properties:{token:{type:"string"},userId:{type:"string"},expiresAt:{type:"string"}}},user:{type:"object",$ref:"#/components/schemas/User"}}}}}}}}}},async e=>{try{let o=await e.getSignedCookie(e.context.authCookies.sessionToken.name,e.context.secret);if(!o)return e.json(null);let i=e.getCookie(e.context.authCookies.sessionData.name),t=i?Ie(Vo.binary.decode(Mo.base64.decode(i))):null;if(t&&!await(0,jo.createHMAC)("SHA-256","base64urlnopad").verify(e.context.secret,JSON.stringify(t.session),t.signature))return q(e),e.json(null);let r=await e.getSignedCookie(e.context.authCookies.dontRememberToken.name,e.context.secret);if(t?.session&&e.context.options.session?.cookieCache?.enabled&&!e.query?.disableCookieCache){let c=t.session;if(t.expiresAt<Date.now()||c.session.expiresAt<new Date){let l=e.context.authCookies.sessionData.name;e.setCookie(l,"",{maxAge:0})}else return e.json(c)}let n=await e.context.internalAdapter.findSession(o);if(e.context.session=n,!n||n.session.expiresAt<new Date)return q(e),n&&await e.context.internalAdapter.deleteSession(n.session.token),e.json(null);if(r||e.query?.disableRefresh)return e.json(n);let a=e.context.sessionConfig.expiresIn,A=e.context.sessionConfig.updateAge;if(n.session.expiresAt.valueOf()-a*1e3+A*1e3<=Date.now()){let c=await e.context.internalAdapter.updateSession(n.session.token,{expiresAt:W(e.context.sessionConfig.expiresIn,"sec")});if(!c)return q(e),e.json(null,{status:401});let u=(c.expiresAt.valueOf()-Date.now())/1e3;return await S(e,{session:c,user:n.user},!1,{maxAge:u}),e.json({session:c,user:n.user})}return await Ve(e,n),e.json(n)}catch(o){throw e.context.logger.error("INTERNAL_SERVER_ERROR",o),new z.APIError("INTERNAL_SERVER_ERROR",{message:p.FAILED_TO_GET_SESSION})}}),re=async(e,o)=>{if(e.context.session)return e.context.session;let i=await He()({...e,_flag:"json",headers:e.headers,query:o}).catch(t=>null);return e.context.session=i,i},_=Ae(async e=>{let o=await re(e);if(!o?.session)throw new z.APIError("UNAUTHORIZED");return{session:o}}),qo=Ae(async e=>{let o=await re(e);if(!o?.session)throw new z.APIError("UNAUTHORIZED");if(e.context.sessionConfig.freshAge===0)return{session:o};let i=e.context.sessionConfig.freshAge,t=o.session.updatedAt?.valueOf()||o.session.createdAt.valueOf();if(!(Date.now()-t<i*1e3))throw new z.APIError("FORBIDDEN",{message:"Session is not fresh"});return{session:o}}),zo=()=>C("/list-sessions",{method:"GET",use:[_],requireHeaders:!0,metadata:{openapi:{description:"List all active sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{token:{type:"string"},userId:{type:"string"},expiresAt:{type:"string"}}}}}}}}}}},async e=>{let i=(await e.context.internalAdapter.listSessions(e.context.session.user.id)).filter(t=>t.expiresAt>new Date);return e.json(i)}),Ho=C("/revoke-session",{method:"POST",body:Y.z.object({token:Y.z.string({description:"The token to revoke"})}),use:[_],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}},required:["token"]}}}}}}},async e=>{let o=e.body.token,i=await e.context.internalAdapter.findSession(o);if(!i)throw new z.APIError("BAD_REQUEST",{message:"Session not found"});if(i.session.userId!==e.context.session.user.id)throw new z.APIError("UNAUTHORIZED");try{await e.context.internalAdapter.deleteSession(o)}catch(t){throw e.context.logger.error(t&&typeof t=="object"&&"name"in t?t.name:"",t),new z.APIError("INTERNAL_SERVER_ERROR")}return e.json({status:!0})}),$o=C("/revoke-sessions",{method:"POST",use:[_],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}},required:["status"]}}}}}}}},async e=>{try{await e.context.internalAdapter.deleteSessions(e.context.session.user.id)}catch(o){throw e.context.logger.error(o&&typeof o=="object"&&"name"in o?o.name:"",o),new z.APIError("INTERNAL_SERVER_ERROR")}return e.json({status:!0})}),Qo=C("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[_],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async e=>{let o=e.context.session;if(!o.user)throw new z.APIError("UNAUTHORIZED");let r=(await e.context.internalAdapter.listSessions(o.user.id)).filter(n=>n.expiresAt>new Date).filter(n=>n.token!==e.context.session.session.token);return await Promise.all(r.map(n=>e.context.internalAdapter.deleteSession(n.token))),e.json({status:!0})});var Zo=require("jose");var Go=require("jose/errors");async function H(e,o,i,t=3600){return await oo({email:o.toLowerCase(),updateTo:i},e,t)}async function bt(e,o){if(!e.context.options.emailVerification?.sendVerificationEmail)throw e.context.logger.error("Verification email isn't enabled."),new de.APIError("BAD_REQUEST",{message:"Verification email isn't enabled"});let i=await H(e.context.secret,o.email,void 0,e.context.options.emailVerification?.expiresIn),t=`${e.context.baseURL}/verify-email?token=${i}&callbackURL=${e.body.callbackURL||e.query?.currentURL||"/"}`;await e.context.options.emailVerification.sendVerificationEmail({user:o,url:t,token:i},e.request)}var Wo=C("/send-verification-email",{method:"POST",query:F.z.object({currentURL:F.z.string({description:"The URL to use for email verification callback"}).optional()}).optional(),body:F.z.object({email:F.z.string({description:"The email to send the verification email to"}).email(),callbackURL:F.z.string({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to"},callbackURL:{type:"string",description:"The URL to use for email verification callback"}},required:["email"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async e=>{if(!e.context.options.emailVerification?.sendVerificationEmail)throw e.context.logger.error("Verification email isn't enabled."),new de.APIError("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:o}=e.body,i=await e.context.internalAdapter.findUserByEmail(o);if(!i)throw new de.APIError("BAD_REQUEST",{message:p.USER_NOT_FOUND});return await bt(e,i.user),e.json({status:!0})}),Xo=C("/verify-email",{method:"GET",query:F.z.object({token:F.z.string({description:"The token to verify the email"}),callbackURL:F.z.string({description:"The URL to redirect to after email verification"}).optional()}),use:[Ke(e=>e.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object"},status:{type:"boolean"}},required:["user","status"]}}}}}}}},async e=>{function o(A){throw e.query.callbackURL?e.query.callbackURL.includes("?")?e.redirect(`${e.query.callbackURL}&error=${A}`):e.redirect(`${e.query.callbackURL}?error=${A}`):new de.APIError("UNAUTHORIZED",{message:A})}let{token:i}=e.query,t;try{t=await(0,Zo.jwtVerify)(i,new TextEncoder().encode(e.context.secret),{algorithms:["HS256"]})}catch(A){return A instanceof Go.JWTExpired?o("token_expired"):o("invalid_token")}let n=F.z.object({email:F.z.string().email(),updateTo:F.z.string().optional()}).parse(t.payload),a=await e.context.internalAdapter.findUserByEmail(n.email);if(!a)return o("user_not_found");if(n.updateTo){let A=await re(e);if(!A){if(e.query.callbackURL)throw e.redirect(`${e.query.callbackURL}?error=unauthorized`);return o("unauthorized")}if(A.user.email!==n.email){if(e.query.callbackURL)throw e.redirect(`${e.query.callbackURL}?error=unauthorized`);return o("unauthorized")}let s=await e.context.internalAdapter.updateUserByEmail(n.email,{email:n.updateTo,emailVerified:!1}),K=await H(e.context.secret,n.updateTo);if(await e.context.options.emailVerification?.sendVerificationEmail?.({user:s,url:`${e.context.baseURL}/verify-email?token=${K}`,token:K},e.request),e.query.callbackURL)throw e.redirect(e.query.callbackURL);return e.json({status:!0,user:{id:s.id,email:s.email,name:s.name,image:s.image,emailVerified:s.emailVerified,createdAt:s.createdAt,updatedAt:s.updatedAt}})}if(await e.context.internalAdapter.updateUserByEmail(n.email,{emailVerified:!0}),e.context.options.emailVerification?.autoSignInAfterVerification){let A=await re(e);if(!A||A.user.email!==n.email){let s=await e.context.internalAdapter.createSession(a.user.id,e.request);if(!s)throw new de.APIError("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await S(e,{session:s,user:a.user})}}if(e.query.callbackURL)throw e.redirect(e.query.callbackURL);return e.json({status:!0,user:null})});async function Ue(e,{userInfo:o,account:i,callbackURL:t}){let r=await e.context.internalAdapter.findOAuthUser(o.email.toLowerCase(),i.accountId,i.providerId).catch(s=>{throw B.error(`Better auth was unable to query your database.
Error: `,s),e.redirect(`${e.context.baseURL}/error?error=internal_server_error`)}),n=r?.user,a=!n;if(r){let s=r.accounts.find(K=>K.providerId===i.providerId);if(s){let K=Object.fromEntries(Object.entries({accessToken:i.accessToken,idToken:i.idToken,refreshToken:i.refreshToken,accessTokenExpiresAt:i.accessTokenExpiresAt,refreshTokenExpiresAt:i.refreshTokenExpiresAt}).filter(([c,u])=>u!==void 0));Object.keys(K).length>0&&await e.context.internalAdapter.updateAccount(s.id,K)}else{if(!e.context.options.account?.accountLinking?.trustedProviders?.includes(i.providerId)&&!o.emailVerified||e.context.options.account?.accountLinking?.enabled===!1)return be&&B.warn(`User already exist but account isn't linked to ${i.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`),{error:"account not linked",data:null};try{await e.context.internalAdapter.linkAccount({providerId:i.providerId,accountId:o.id.toString(),userId:r.user.id,accessToken:i.accessToken,idToken:i.idToken,refreshToken:i.refreshToken,accessTokenExpiresAt:i.accessTokenExpiresAt,refreshTokenExpiresAt:i.refreshTokenExpiresAt,scope:i.scope})}catch(u){return B.error("Unable to link account",u),{error:"unable to link account",data:null}}}}else try{if(n=await e.context.internalAdapter.createOAuthUser({...o,email:o.email.toLowerCase(),id:void 0},{accessToken:i.accessToken,idToken:i.idToken,refreshToken:i.refreshToken,accessTokenExpiresAt:i.accessTokenExpiresAt,refreshTokenExpiresAt:i.refreshTokenExpiresAt,scope:i.scope,providerId:i.providerId,accountId:o.id.toString()}).then(s=>s?.user),!o.emailVerified&&n&&e.context.options.emailVerification?.sendOnSignUp){let s=await H(e.context.secret,n.email,void 0,e.context.options.emailVerification?.expiresIn),K=`${e.context.baseURL}/verify-email?token=${s}&callbackURL=${t}`;await e.context.options.emailVerification?.sendVerificationEmail?.({user:n,url:K,token:s},e.request)}}catch(s){return s instanceof fe.APIError?{error:s.message,data:null,isRegister:!1}:{error:"unable to create user",data:null,isRegister:!1}}if(!n)return{error:"unable to create user",data:null,isRegister:!1};let A=await e.context.internalAdapter.createSession(n.id,e.request);return A?{data:{session:A,user:n},error:null,isRegister:a}:{error:"unable to create session",data:null,isRegister:!1}}var Jo=C("/sign-in/social",{method:"POST",query:U.z.object({currentURL:U.z.string().optional()}).optional(),body:U.z.object({callbackURL:U.z.string({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:U.z.string().optional(),errorCallbackURL:U.z.string({description:"Callback URL to redirect to if an error happens"}).optional(),provider:Fo,disableRedirect:U.z.boolean({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:U.z.optional(U.z.object({token:U.z.string({description:"ID token from the provider"}),nonce:U.z.string({description:"Nonce used to generate the token"}).optional(),accessToken:U.z.string({description:"Access token from the provider"}).optional(),refreshToken:U.z.string({description:"Refresh token from the provider"}).optional(),expiresAt:U.z.number({description:"Expiry date of the token"}).optional()}),{description:"ID token from the provider to sign in the user with id token"})}),metadata:{openapi:{description:"Sign in with a social provider",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{session:{type:"string"},user:{type:"object"},url:{type:"string"},redirect:{type:"boolean"}},required:["session","user","url","redirect"]}}}}}}}},async e=>{let o=e.context.socialProviders.find(n=>n.id===e.body.provider);if(!o)throw e.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:e.body.provider}),new P.APIError("NOT_FOUND",{message:p.PROVIDER_NOT_FOUND});if(e.body.idToken){if(!o.verifyIdToken)throw e.context.logger.error("Provider does not support id token verification",{provider:e.body.provider}),new P.APIError("NOT_FOUND",{message:p.ID_TOKEN_NOT_SUPPORTED});let{token:n,nonce:a}=e.body.idToken;if(!await o.verifyIdToken(n,a))throw e.context.logger.error("Invalid id token",{provider:e.body.provider}),new P.APIError("UNAUTHORIZED",{message:p.INVALID_TOKEN});let s=await o.getUserInfo({idToken:n,accessToken:e.body.idToken.accessToken,refreshToken:e.body.idToken.refreshToken});if(!s||!s?.user)throw e.context.logger.error("Failed to get user info",{provider:e.body.provider}),new P.APIError("UNAUTHORIZED",{message:p.FAILED_TO_GET_USER_INFO});if(!s.user.email)throw e.context.logger.error("User email not found",{provider:e.body.provider}),new P.APIError("UNAUTHORIZED",{message:p.USER_EMAIL_NOT_FOUND});let K=await Ue(e,{userInfo:{email:s.user.email,id:s.user.id,name:s.user.name||"",image:s.user.image,emailVerified:s.user.emailVerified||!1},account:{providerId:o.id,accountId:s.user.id,accessToken:e.body.idToken.accessToken}});if(K.error)throw new P.APIError("UNAUTHORIZED",{message:K.error});return await S(e,K.data),e.json({redirect:!1,token:K.data.session.token,url:void 0,user:{id:K.data.user.id,email:K.data.user.email,name:K.data.user.name,image:K.data.user.image,emailVerified:K.data.user.emailVerified,createdAt:K.data.user.createdAt,updatedAt:K.data.user.updatedAt}})}let{codeVerifier:i,state:t}=await Re(e),r=await o.createAuthorizationURL({state:t,codeVerifier:i,redirectURI:`${e.context.baseURL}/callback/${o.id}`});return e.json({url:r.toString(),redirect:!e.body.disableRedirect})}),Yo=C("/sign-in/email",{method:"POST",body:U.z.object({email:U.z.string({description:"Email of the user"}),password:U.z.string({description:"Password of the user"}),callbackURL:U.z.string({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:U.z.boolean({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{openapi:{description:"Sign in with email and password",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object"},url:{type:"string"},redirect:{type:"boolean"}},required:["session","user","url","redirect"]}}}}}}}},async e=>{if(!e.context.options?.emailAndPassword?.enabled)throw e.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new P.APIError("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:o,password:i}=e.body;if(!U.z.string().email().safeParse(o).success)throw new P.APIError("BAD_REQUEST",{message:p.INVALID_EMAIL});let r=await e.context.internalAdapter.findUserByEmail(o,{includeAccounts:!0});if(!r)throw await e.context.password.hash(i),e.context.logger.error("User not found",{email:o}),new P.APIError("UNAUTHORIZED",{message:p.INVALID_EMAIL_OR_PASSWORD});let n=r.accounts.find(K=>K.providerId==="credential");if(!n)throw e.context.logger.error("Credential account not found",{email:o}),new P.APIError("UNAUTHORIZED",{message:p.INVALID_EMAIL_OR_PASSWORD});let a=n?.password;if(!a)throw e.context.logger.error("Password not found",{email:o}),new P.APIError("UNAUTHORIZED",{message:p.INVALID_EMAIL_OR_PASSWORD});if(!await e.context.password.verify({hash:a,password:i}))throw e.context.logger.error("Invalid password"),new P.APIError("UNAUTHORIZED",{message:p.INVALID_EMAIL_OR_PASSWORD});if(e.context.options?.emailAndPassword?.requireEmailVerification&&!r.user.emailVerified){if(!e.context.options?.emailVerification?.sendVerificationEmail)throw new P.APIError("UNAUTHORIZED",{message:p.EMAIL_NOT_VERIFIED});let K=await H(e.context.secret,r.user.email,void 0,e.context.options.emailVerification?.expiresIn),c=`${e.context.baseURL}/verify-email?token=${K}&callbackURL=${e.body.callbackURL||"/"}`;throw await e.context.options.emailVerification.sendVerificationEmail({user:r.user,url:c,token:K},e.request),new P.APIError("FORBIDDEN",{message:p.EMAIL_NOT_VERIFIED})}let s=await e.context.internalAdapter.createSession(r.user.id,e.headers,e.body.rememberMe===!1);if(!s)throw e.context.logger.error("Failed to create session"),new P.APIError("UNAUTHORIZED",{message:p.FAILED_TO_CREATE_SESSION});return await S(e,{session:s,user:r.user},e.body.rememberMe===!1),e.json({redirect:!!e.body.callbackURL,token:s.token,url:e.body.callbackURL,user:{id:r.user.id,email:r.user.email,name:r.user.name,image:r.user.image,emailVerified:r.user.emailVerified,createdAt:r.user.createdAt,updatedAt:r.user.updatedAt}})});var ce=require("zod");var Ee=ce.z.object({code:ce.z.string().optional(),error:ce.z.string().optional(),error_description:ce.z.string().optional(),state:ce.z.string().optional()}),ei=C("/callback/:id",{method:["GET","POST"],body:Ee.optional(),query:Ee.optional(),metadata:se},async e=>{let o;try{if(e.method==="GET")o=Ee.parse(e.query);else if(e.method==="POST")o=Ee.parse(e.body);else throw new Error("Unsupported method")}catch(g){throw e.context.logger.error("INVALID_CALLBACK_REQUEST",g),e.redirect(`${e.context.baseURL}/error?error=invalid_callback_request`)}let{code:i,error:t,state:r,error_description:n}=o;if(!r)throw e.context.logger.error("State not found",t),e.redirect(`${e.context.baseURL}/error?error=state_not_found`);if(!i)throw e.context.logger.error("Code not found"),e.redirect(`${e.context.baseURL}/error?error=${t||"no_code"}&error_description=${n}`);let a=e.context.socialProviders.find(g=>g.id===e.params.id);if(!a)throw e.context.logger.error("Oauth provider with id",e.params.id,"not found"),e.redirect(`${e.context.baseURL}/error?error=oauth_provider_not_found`);let{codeVerifier:A,callbackURL:s,link:K,errorURL:c,newUserURL:u}=await to(e),l;try{l=await a.validateAuthorizationCode({code:i,codeVerifier:A,redirectURI:`${e.context.baseURL}/callback/${a.id}`})}catch(g){throw e.context.logger.error("",g),e.redirect(`${e.context.baseURL}/error?error=please_restart_the_process`)}let d=await a.getUserInfo(l).then(g=>g?.user);function y(g){let f=c||s||`${e.context.baseURL}/error`;throw f.includes("?")?f=`${f}&error=${g}`:f=`${f}?error=${g}`,e.redirect(f)}if(!d)return e.context.logger.error("Unable to get user info"),y("unable_to_get_user_info");if(!d.email)return e.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),y("email_not_found");if(!s)throw e.context.logger.error("No callback URL found"),e.redirect(`${e.context.baseURL}/error?error=please_restart_the_process`);if(K){if(K.email!==d.email.toLowerCase())return y("email_doesn't_match");if(!await e.context.internalAdapter.createAccount({userId:K.userId,providerId:a.id,accountId:d.id}))return y("unable_to_link_account");let f;try{f=s.toString()}catch{f=s}throw e.redirect(f)}let b=await Ue(e,{userInfo:{...d,email:d.email,name:d.name||d.email},account:{providerId:a.id,accountId:d.id,...l,scope:l.scopes?.join(",")},callbackURL:s});if(b.error)return e.context.logger.error(b.error.split(" ").join("_")),y(b.error.split(" ").join("_"));let{session:E,user:j}=b.data;await S(e,{session:E,user:j});let I;try{I=(b.isRegister&&u||s).toString()}catch{I=b.isRegister&&u||s}throw e.redirect(I)});var oi=require("better-call");var ii=C("/sign-out",{method:"POST",requireHeaders:!0,metadata:{openapi:{description:"Sign out the current user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async e=>{let o=await e.getSignedCookie(e.context.authCookies.sessionToken.name,e.context.secret);if(!o)throw q(e),new oi.APIError("BAD_REQUEST",{message:p.FAILED_TO_GET_SESSION});return await e.context.internalAdapter.deleteSession(o),q(e),e.json({success:!0})});var L=require("zod");var le=require("better-call");function ti(e,o,i){let t=o?new URL(o,e.baseURL):new URL(`${e.baseURL}/error`);return i&&Object.entries(i).forEach(([r,n])=>t.searchParams.set(r,n)),t.href}function vt(e,o,i){let t=new URL(o,e.baseURL);return i&&Object.entries(i).forEach(([r,n])=>t.searchParams.set(r,n)),t.href}var ri=C("/forget-password",{method:"POST",body:L.z.object({email:L.z.string({description:"The email address of the user to send a password reset email to"}).email(),redirectTo:L.z.string({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async e=>{if(!e.context.options.emailAndPassword?.sendResetPassword)throw e.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPasswordToken function in your auth config!"),new le.APIError("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:o,redirectTo:i}=e.body,t=await e.context.internalAdapter.findUserByEmail(o,{includeAccounts:!0});if(!t)return e.context.logger.error("Reset Password: User not found",{email:o}),e.json({status:!1},{body:{status:!0}});let r=60*60*1,n=W(e.context.options.emailAndPassword.resetPasswordTokenExpiresIn||r,"sec"),a=ge(24);await e.context.internalAdapter.createVerificationValue({value:t.user.id.toString(),identifier:`reset-password:${a}`,expiresAt:n});let A=`${e.context.baseURL}/reset-password/${a}?callbackURL=${i}`;return await e.context.options.emailAndPassword.sendResetPassword({user:t.user,url:A,token:a},e.request),e.json({status:!0})}),ni=C("/reset-password/:token",{method:"GET",query:L.z.object({callbackURL:L.z.string({description:"The URL to redirect the user to reset their password"})}),use:[Ke(e=>e.query.callbackURL)],metadata:{openapi:{description:"Redirects the user to the callback URL with the token",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async e=>{let{token:o}=e.params,{callbackURL:i}=e.query;if(!o||!i)throw e.redirect(ti(e.context,i,{error:"INVALID_TOKEN"}));let t=await e.context.internalAdapter.findVerificationValue(`reset-password:${o}`);throw!t||t.expiresAt<new Date?e.redirect(ti(e.context,i,{error:"INVALID_TOKEN"})):e.redirect(vt(e.context,i,{token:o}))}),si=C("/reset-password",{query:L.z.optional(L.z.object({token:L.z.string().optional(),currentURL:L.z.string().optional()})),method:"POST",body:L.z.object({newPassword:L.z.string({description:"The new password to set"}),token:L.z.string({description:"The token to reset the password"}).optional()}),metadata:{openapi:{description:"Reset the password for a user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async e=>{let o=e.body.token||e.query?.token||(e.query?.currentURL?new URL(e.query.currentURL).searchParams.get("token"):"");if(!o)throw new le.APIError("BAD_REQUEST",{message:p.INVALID_TOKEN});let{newPassword:i}=e.body,t=e.context.password?.config.minPasswordLength,r=e.context.password?.config.maxPasswordLength;if(i.length<t)throw new le.APIError("BAD_REQUEST",{message:p.PASSWORD_TOO_SHORT});if(i.length>r)throw new le.APIError("BAD_REQUEST",{message:p.PASSWORD_TOO_LONG});let n=`reset-password:${o}`,a=await e.context.internalAdapter.findVerificationValue(n);if(!a||a.expiresAt<new Date)throw new le.APIError("BAD_REQUEST",{message:p.INVALID_TOKEN});await e.context.internalAdapter.deleteVerificationValue(a.id);let A=a.value,s=await e.context.password.hash(i);return(await e.context.internalAdapter.findAccounts(A)).find(u=>u.providerId==="credential")?(await e.context.internalAdapter.updatePassword(A,s),e.json({status:!0})):(await e.context.internalAdapter.createAccount({userId:A,providerId:"credential",password:s,accountId:A}),e.json({status:!0}))});var T=require("zod");var k=require("better-call");var ai=()=>C("/update-user",{method:"POST",body:T.z.record(T.z.string(),T.z.any()),use:[_],metadata:{openapi:{description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user"}}}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object"}}}}}}}}}},async e=>{let o=e.body;if(o.email)throw new k.APIError("BAD_REQUEST",{message:p.EMAIL_CAN_NOT_BE_UPDATED});let{name:i,image:t,...r}=o,n=e.context.session;if(t===void 0&&i===void 0&&Object.keys(r).length===0)return e.json({status:!0});let a=ye(e.context.options,r,"update"),A=await e.context.internalAdapter.updateUserByEmail(n.user.email,{name:i,image:t,...a});return await S(e,{session:n.session,user:A}),e.json({status:!0})}),Ai=C("/change-password",{method:"POST",body:T.z.object({newPassword:T.z.string({description:"The new password to set"}),currentPassword:T.z.string({description:"The current password"}),revokeOtherSessions:T.z.boolean({description:"Revoke all other sessions"}).optional()}),use:[_],metadata:{openapi:{description:"Change the password of the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{description:"The user object",$ref:"#/components/schemas/User"}}}}}}}}}},async e=>{let{newPassword:o,currentPassword:i,revokeOtherSessions:t}=e.body,r=e.context.session,n=e.context.password.config.minPasswordLength;if(o.length<n)throw e.context.logger.error("Password is too short"),new k.APIError("BAD_REQUEST",{message:p.PASSWORD_TOO_SHORT});let a=e.context.password.config.maxPasswordLength;if(o.length>a)throw e.context.logger.error("Password is too long"),new k.APIError("BAD_REQUEST",{message:p.PASSWORD_TOO_LONG});let s=(await e.context.internalAdapter.findAccounts(r.user.id)).find(l=>l.providerId==="credential"&&l.password);if(!s||!s.password)throw new k.APIError("BAD_REQUEST",{message:p.CREDENTIAL_ACCOUNT_NOT_FOUND});let K=await e.context.password.hash(o);if(!await e.context.password.verify({hash:s.password,password:i}))throw new k.APIError("BAD_REQUEST",{message:p.INVALID_PASSWORD});await e.context.internalAdapter.updateAccount(s.id,{password:K});let u=null;if(t){await e.context.internalAdapter.deleteSessions(r.user.id);let l=await e.context.internalAdapter.createSession(r.user.id,e.headers);if(!l)throw new k.APIError("INTERNAL_SERVER_ERROR",{message:p.FAILED_TO_GET_SESSION});await S(e,{session:l,user:r.user}),u=l.token}return e.json({token:u,user:{id:r.user.id,email:r.user.email,name:r.user.name,image:r.user.image,emailVerified:r.user.emailVerified,createdAt:r.user.createdAt,updatedAt:r.user.updatedAt}})}),Ki=C("/set-password",{method:"POST",body:T.z.object({newPassword:T.z.string()}),metadata:{SERVER_ONLY:!0},use:[_]},async e=>{let{newPassword:o}=e.body,i=e.context.session,t=e.context.password.config.minPasswordLength;if(o.length<t)throw e.context.logger.error("Password is too short"),new k.APIError("BAD_REQUEST",{message:p.PASSWORD_TOO_SHORT});let r=e.context.password.config.maxPasswordLength;if(o.length>r)throw e.context.logger.error("Password is too long"),new k.APIError("BAD_REQUEST",{message:p.PASSWORD_TOO_LONG});let a=(await e.context.internalAdapter.findAccounts(i.user.id)).find(s=>s.providerId==="credential"&&s.password),A=await e.context.password.hash(o);if(!a)return await e.context.internalAdapter.linkAccount({userId:i.user.id,providerId:"credential",accountId:i.user.id,password:A}),e.json({status:!0});throw new k.APIError("BAD_REQUEST",{message:"user already has a password"})}),di=C("/delete-user",{method:"POST",use:[_],body:T.z.object({callbackURL:T.z.string().optional(),password:T.z.string().optional(),token:T.z.string().optional()}),metadata:{openapi:{description:"Delete the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object"}}}}}}}},async e=>{if(!e.context.options.user?.deleteUser?.enabled)throw e.context.logger.error("Delete user is disabled. Enable it in the options",{session:e.context.session}),new k.APIError("NOT_FOUND");let o=e.context.session;if(e.body.password){let n=(await e.context.internalAdapter.findAccounts(o.user.id)).find(A=>A.providerId==="credential"&&A.password);if(!n||!n.password)throw new k.APIError("BAD_REQUEST",{message:p.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await e.context.password.verify({hash:n.password,password:e.body.password}))throw new k.APIError("BAD_REQUEST",{message:p.INVALID_PASSWORD})}else if(e.context.options.session?.freshAge){let r=o.session.createdAt.getTime(),n=e.context.options.session.freshAge;if(Date.now()-r>n)throw new k.APIError("BAD_REQUEST",{message:p.SESSION_EXPIRED})}if(e.body.token)return await $e({...e,query:{token:e.body.token}}),e.json({success:!0,message:"User deleted"});if(e.context.options.user.deleteUser?.sendDeleteAccountVerification){let r=pe(32,"0-9","a-z");await e.context.internalAdapter.createVerificationValue({value:o.user.id,identifier:`delete-account-${r}`,expiresAt:new Date(Date.now()+1e3*60*60*24)});let n=`${e.context.baseURL}/delete-user/callback?token=${r}&callbackURL=${e.body.callbackURL||"/"}`;return await e.context.options.user.deleteUser.sendDeleteAccountVerification({user:o.user,url:n,token:r},e.request),e.json({success:!0,message:"Verification email sent"})}let i=e.context.options.user.deleteUser?.beforeDelete;i&&await i(o.user,e.request),await e.context.internalAdapter.deleteUser(o.user.id),await e.context.internalAdapter.deleteSessions(o.user.id),await e.context.internalAdapter.deleteAccounts(o.user.id),q(e);let t=e.context.options.user.deleteUser?.afterDelete;return t&&await t(o.user,e.request),e.json({success:!0,message:"User deleted"})}),$e=C("/delete-user/callback",{method:"GET",query:T.z.object({token:T.z.string(),callbackURL:T.z.string().optional()}),use:[Ke(e=>e.query.callbackURL)]},async e=>{if(!e.context.options.user?.deleteUser?.enabled)throw e.context.logger.error("Delete user is disabled. Enable it in the options"),new k.APIError("NOT_FOUND");let o=await re(e);if(!o)throw new k.APIError("NOT_FOUND",{message:p.FAILED_TO_GET_USER_INFO});let i=await e.context.internalAdapter.findVerificationValue(`delete-account-${e.query.token}`);if(!i||i.expiresAt<new Date)throw i&&await e.context.internalAdapter.deleteVerificationValue(i.id),new k.APIError("NOT_FOUND",{message:p.INVALID_TOKEN});if(i.value!==o.user.id)throw new k.APIError("NOT_FOUND",{message:p.INVALID_TOKEN});let t=e.context.options.user.deleteUser?.beforeDelete;t&&await t(o.user,e.request),await e.context.internalAdapter.deleteUser(o.user.id),await e.context.internalAdapter.deleteSessions(o.user.id),await e.context.internalAdapter.deleteAccounts(o.user.id),await e.context.internalAdapter.deleteVerificationValue(i.id),q(e);let r=e.context.options.user.deleteUser?.afterDelete;if(r&&await r(o.user,e.request),e.query.callbackURL)throw e.redirect(e.query.callbackURL||"/");return e.json({success:!0,message:"User deleted"})}),ci=C("/change-email",{method:"POST",query:T.z.object({currentURL:T.z.string().optional()}).optional(),body:T.z.object({newEmail:T.z.string({description:"The new email to set"}).email(),callbackURL:T.z.string({description:"The URL to redirect to after email verification"}).optional()}),use:[_],metadata:{openapi:{responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object"},status:{type:"boolean"}}}}}}}}}},async e=>{if(!e.context.options.user?.changeEmail?.enabled)throw e.context.logger.error("Change email is disabled."),new k.APIError("BAD_REQUEST",{message:"Change email is disabled"});if(e.body.newEmail===e.context.session.user.email)throw e.context.logger.error("Email is the same"),new k.APIError("BAD_REQUEST",{message:"Email is the same"});if(await e.context.internalAdapter.findUserByEmail(e.body.newEmail))throw e.context.logger.error("Email already exists"),new k.APIError("BAD_REQUEST",{message:"Couldn't update your email"});if(e.context.session.user.emailVerified!==!0){let r=await e.context.internalAdapter.updateUserByEmail(e.context.session.user.email,{email:e.body.newEmail});return e.json({status:!0})}if(!e.context.options.user.changeEmail.sendChangeEmailVerification)throw e.context.logger.error("Verification email isn't enabled."),new k.APIError("BAD_REQUEST",{message:"Verification email isn't enabled"});let i=await H(e.context.secret,e.context.session.user.email,e.body.newEmail,e.context.options.emailVerification?.expiresIn),t=`${e.context.baseURL}/verify-email?token=${i}&callbackURL=${e.body.callbackURL||e.query?.currentURL||"/"}`;return await e.context.options.user.changeEmail.sendChangeEmailVerification({user:e.context.session.user,newEmail:e.body.newEmail,url:t,token:i},e.request),e.json({status:!0})});var Rt=(e="Unknown")=>`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication Error</title>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --text-color: #212529;
            --accent-color: #000000;
            --error-color: #dc3545;
            --border-color: #e9ecef;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            line-height: 1.5;
        }
        .error-container {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 2.5rem;
            text-align: center;
            max-width: 90%;
            width: 400px;
        }
        h1 {
            color: var(--error-color);
            font-size: 1.75rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        p {
            margin-bottom: 1.5rem;
            color: #495057;
        }
        .btn {
            background-color: var(--accent-color);
            color: #ffffff;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            display: inline-block;
            font-weight: 500;
            border: 2px solid var(--accent-color);
        }
        .btn:hover {
            background-color: #131721;
        }
        .error-code {
            font-size: 0.875rem;
            color: #6c757d;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
        }
        .icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <div class="error-container">
        <div class="icon">\u26A0\uFE0F</div>
        <h1>Better Auth Error</h1>
        <p>We encountered an issue while processing your request. Please try again or contact the application owner if the problem persists.</p>
        <a href="/" id="returnLink" class="btn">Return to Application</a>
        <div class="error-code">Error Code: <span id="errorCode">${e}</span></div>
    </div>
</body>
</html>`,li=C("/error",{method:"GET",metadata:{...se,openapi:{description:"Displays an error page",responses:{200:{description:"Success",content:{"text/html":{schema:{type:"string"}}}}}}}},async e=>{let o=new URL(e.request?.url||"").searchParams.get("error")||"Unknown";return new Response(Rt(o),{headers:{"Content-Type":"text/html"}})});var ui=C("/ok",{method:"GET",metadata:{...se,openapi:{description:"Check if the API is working",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean"}}}}}}}}}},async e=>e.json({ok:!0}));var ne=require("zod");var $=require("better-call");var gi=()=>C("/sign-up/email",{method:"POST",query:ne.z.object({currentURL:ne.z.string().optional()}).optional(),body:ne.z.record(ne.z.string(),ne.z.any()),metadata:{openapi:{description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"}},required:["name","email","password"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string",description:"The id of the user"},email:{type:"string",description:"The email of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user"},emailVerified:{type:"boolean",description:"If the email is verified"}}}}}}}}}},async e=>{if(!e.context.options.emailAndPassword?.enabled)throw new $.APIError("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let o=e.body,{name:i,email:t,password:r,image:n,callbackURL:a,...A}=o;if(!ne.z.string().email().safeParse(t).success)throw new $.APIError("BAD_REQUEST",{message:p.INVALID_EMAIL});let K=e.context.password.config.minPasswordLength;if(r.length<K)throw e.context.logger.error("Password is too short"),new $.APIError("BAD_REQUEST",{message:p.PASSWORD_TOO_SHORT});let c=e.context.password.config.maxPasswordLength;if(r.length>c)throw e.context.logger.error("Password is too long"),new $.APIError("BAD_REQUEST",{message:p.PASSWORD_TOO_LONG});if((await e.context.internalAdapter.findUserByEmail(t))?.user)throw e.context.logger.info(`Sign-up attempt for existing email: ${t}`),new $.APIError("UNPROCESSABLE_ENTITY",{message:p.USER_ALREADY_EXISTS});let l=ye(e.context.options,A),d;try{if(d=await e.context.internalAdapter.createUser({email:t.toLowerCase(),name:i,image:n,...l,emailVerified:!1}),!d)throw new $.APIError("BAD_REQUEST",{message:p.FAILED_TO_CREATE_USER})}catch(E){throw be&&e.context.logger.error("Failed to create user",E),new $.APIError("UNPROCESSABLE_ENTITY",{message:p.FAILED_TO_CREATE_USER,details:E})}if(!d)throw new $.APIError("UNPROCESSABLE_ENTITY",{message:p.FAILED_TO_CREATE_USER});let y=await e.context.password.hash(r);if(await e.context.internalAdapter.linkAccount({userId:d.id,providerId:"credential",accountId:d.id,password:y}),e.context.options.emailVerification?.sendOnSignUp||e.context.options.emailAndPassword.requireEmailVerification){let E=await H(e.context.secret,d.email,void 0,e.context.options.emailVerification?.expiresIn),j=`${e.context.baseURL}/verify-email?token=${E}&callbackURL=${o.callbackURL||e.query?.currentURL||"/"}`;await e.context.options.emailVerification?.sendVerificationEmail?.({user:d,url:j,token:E},e.request)}if(!e.context.options.emailAndPassword.autoSignIn||e.context.options.emailAndPassword.requireEmailVerification)return e.json({token:null,user:{id:d.id,email:d.email,name:d.name,image:d.image,emailVerified:d.emailVerified,createdAt:d.createdAt,updatedAt:d.updatedAt}});let b=await e.context.internalAdapter.createSession(d.id,e.request);if(!b)throw new $.APIError("BAD_REQUEST",{message:p.FAILED_TO_CREATE_SESSION});return await S(e,{session:b,user:d}),e.json({token:b.token,user:{id:d.id,email:d.email,name:d.name,image:d.image,emailVerified:d.emailVerified,createdAt:d.createdAt,updatedAt:d.updatedAt}})});var ee=require("zod");var me=require("better-call");var pi=C("/list-accounts",{method:"GET",use:[_],metadata:{openapi:{description:"List all accounts linked to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},provider:{type:"string"}}}}}}}}}}},async e=>{let o=e.context.session,i=await e.context.internalAdapter.findAccounts(o.user.id);return e.json(i.map(t=>({id:t.id,provider:t.providerId,createdAt:t.createdAt,updatedAt:t.updatedAt,accountId:t.accountId,scopes:t.scope?.split(",")||[]})))}),fi=C("/link-social",{method:"POST",requireHeaders:!0,query:ee.z.object({currentURL:ee.z.string().optional()}).optional(),body:ee.z.object({callbackURL:ee.z.string({description:"The URL to redirect to after the user has signed in"}).optional(),provider:ee.z.enum(ze,{description:"The OAuth2 provider to use"})}),use:[_],metadata:{openapi:{description:"Link a social account to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string"},redirect:{type:"boolean"}},required:["url","redirect"]}}}}}}}},async e=>{let o=e.context.session;if((await e.context.internalAdapter.findAccounts(o.user.id)).find(A=>A.providerId===e.body.provider))throw new me.APIError("BAD_REQUEST",{message:p.SOCIAL_ACCOUNT_ALREADY_LINKED});let r=e.context.socialProviders.find(A=>A.id===e.body.provider);if(!r)throw e.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:e.body.provider}),new me.APIError("NOT_FOUND",{message:p.PROVIDER_NOT_FOUND});let n=await Re(e,{userId:o.user.id,email:o.user.email}),a=await r.createAuthorizationURL({state:n.state,codeVerifier:n.codeVerifier,redirectURI:`${e.context.baseURL}/callback/${r.id}`});return e.json({url:a.toString(),redirect:!0})}),mi=C("/unlink-account",{method:"POST",body:ee.z.object({providerId:ee.z.string()}),use:[qo]},async e=>{let o=await e.context.internalAdapter.findAccounts(e.context.session.user.id);if(o.length===1)throw new me.APIError("BAD_REQUEST",{message:p.FAILED_TO_UNLINK_LAST_ACCOUNT});if(!o.find(t=>t.providerId===e.body.providerId))throw new me.APIError("BAD_REQUEST",{message:p.ACCOUNT_NOT_FOUND});return await e.context.internalAdapter.deleteAccount(e.body.providerId,e.context.session.user.id),e.json({status:!0})});var fe=require("better-call");function Qe(e,o){let i=o.plugins?.reduce((A,s)=>({...A,...s.endpoints}),{}),t=o.plugins?.map(A=>A.middlewares?.map(s=>{let K=async c=>s.middleware({...c,context:{...e,...c.context}});return K.path=s.path,K.options=s.middleware.options,K.headers=s.middleware.headers,{path:s.path,middleware:K}})).filter(A=>A!==void 0).flat()||[],n={...{signInSocial:Jo,callbackOAuth:ei,getSession:He(),signOut:ii,signUpEmail:gi(),signInEmail:Yo,forgetPassword:ri,resetPassword:si,verifyEmail:Xo,sendVerificationEmail:Wo,changeEmail:ci,changePassword:Ai,setPassword:Ki,updateUser:ai(),deleteUser:di,forgetPasswordCallback:ni,listSessions:zo(),revokeSession:Ho,revokeSessions:$o,revokeOtherSessions:Qo,linkSocialAccount:fi,listUserAccounts:pi,deleteUserCallback:$e,unlinkAccount:mi},...i,ok:ui,error:li},a={};for(let[A,s]of Object.entries(n))a[A]=async(K={})=>{s.headers=new Headers;let c={setHeader(g,f){s.headers.set(g,f)},setCookie(g,f,O){(0,x.setCookie)(s.headers,g,f,O)},getCookie(g,f){let m=K.headers?.get("cookie");return(0,x.getCookie)(m||"",g,f)},getSignedCookie(g,f,O){let m=K.headers;return m?(0,x.getSignedCookie)(m,f,g,O):null},async setSignedCookie(g,f,O,m){await(0,x.setSignedCookie)(s.headers,g,f,O,m)},redirect(g){return s.headers.set("Location",g),new x.APIError("FOUND")},responseHeader:s.headers},u=await e,l=null,d={...c,...K,path:s.path,context:{...u,...K.context,session:null,setNewSession:function(g){this.newSession=g,l=g}}},y=o.plugins||[],b=y.map(g=>{if(g.hooks?.before)return g.hooks.before}).filter(g=>g!==void 0).flat(),E=y.map(g=>{if(g.hooks?.after)return g.hooks.after}).filter(g=>g!==void 0).flat();o.hooks?.before&&b.push({matcher:()=>!0,handler:o.hooks.before}),o.hooks?.after&&E.push({matcher:()=>!0,handler:o.hooks.after});for(let g of b){if(!g.matcher(d))continue;let f=await g.handler(d);if(f&&"context"in f){d={...d,...f.context};continue}if(f)return f}let j;try{j=await s(d),l&&(d.context.newSession=l)}catch(g){if(l&&(d.context.newSession=l),g instanceof x.APIError){if(!E?.length)throw g.headers=s.headers,g;d.context.returned=g,d.context.returned.headers=s.headers;for(let f of E||[])if(f.matcher(d))try{let m=await f.handler(d);m&&"response"in m&&(d.context.returned=m.response)}catch(m){if(m instanceof x.APIError){d.context.returned=m;continue}throw m}if(d.context.returned instanceof x.APIError)throw d.context.returned.headers=s.headers,d.context.returned;return d.context.returned}throw g}d.context.returned=j,d.responseHeader=s.headers;for(let g of E)if(g.matcher(d))try{let O=await g.handler(d);if(O)if("responseHeader"in O){let m=O.responseHeader;d.responseHeader=m}else d.context.returned=O}catch(O){if(O instanceof x.APIError){d.context.returned=O;continue}throw O}let I=d.context.returned;if(I instanceof Response&&s.headers.forEach((g,f)=>{f==="set-cookie"?I.headers.append(f,g):I.headers.set(f,g)}),I instanceof x.APIError)throw I.headers=s.headers,I;return I},a[A].path=s.path,a[A].method=s.method,a[A].options=s.options,a[A].headers=s.headers;return{api:a,middlewares:t}}var Ce={};function hi(e){switch(e.constructor.name){case"ZodString":return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array";default:return"string"}}function Oe(e){let o=[];return e.metadata?.openapi?.parameters?(o.push(...e.metadata.openapi.parameters),o):(e.query instanceof Q.ZodObject&&Object.entries(e.query.shape).forEach(([i,t])=>{t instanceof Q.ZodSchema&&o.push({name:i,in:"query",schema:{type:hi(t),..."minLength"in t&&t.minLength?{minLength:t.minLength}:{},description:t.description}})}),o)}function Ci(e){if(e.metadata?.openapi?.requestBody)return e.metadata.openapi.requestBody;if(e.body&&(e.body instanceof Q.ZodObject||e.body instanceof Q.ZodOptional)){let o=e.body.shape;if(!o)return;let i={},t=[];return Object.entries(o).forEach(([r,n])=>{n instanceof Q.ZodSchema&&(i[r]={type:hi(n),description:n.description},n instanceof Q.ZodOptional||t.push(r))}),{required:e.body instanceof Q.ZodOptional?!1:!!e.body,content:{"application/json":{schema:{type:"object",properties:i,required:t}}}}}}function Pe(e){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...e}}async function Ze(e,o){let i=Qe(e,{...o,plugins:[]}),t=ae(o),n={schemas:{...Object.entries(t).reduce((A,[s,K])=>{let c=s.charAt(0).toUpperCase()+s.slice(1);return A[c]={type:"object",properties:Object.entries(K.fields).reduce((u,[l,d])=>(u[l]={type:d.type},u),{})},A},{})}};Object.entries(i.api).forEach(([A,s])=>{let K=s.options;if(!K.metadata?.SERVER_ONLY&&(K.method==="GET"&&(Ce[s.path]={get:{tags:["Default",...K.metadata?.openapi?.tags||[]],description:K.metadata?.openapi?.description,operationId:K.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:Oe(K),responses:Pe(K.metadata?.openapi?.responses)}}),K.method==="POST")){let c=Ci(K);Ce[s.path]={post:{tags:["Default",...K.metadata?.openapi?.tags||[]],description:K.metadata?.openapi?.description,operationId:K.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:Oe(K),...c?{requestBody:c}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:Pe(K.metadata?.openapi?.responses)}}}});for(let A of o.plugins||[]){if(A.id==="open-api")continue;let s=Qe(e,{...o,plugins:[A]}),K=Object.keys(s.api).map(c=>i.api[c]===void 0?s.api[c]:null).filter(c=>c!==null);Object.entries(K).forEach(([c,u])=>{let l=u.options;l.metadata?.SERVER_ONLY||(l.method==="GET"&&(Ce[u.path]={get:{tags:l.metadata?.openapi?.tags||[A.id.charAt(0).toUpperCase()+A.id.slice(1)],description:l.metadata?.openapi?.description,operationId:l.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:Oe(l),responses:Pe(l.metadata?.openapi?.responses)}}),l.method==="POST"&&(Ce[u.path]={post:{tags:l.metadata?.openapi?.tags||[A.id.charAt(0).toUpperCase()+A.id.slice(1)],description:l.metadata?.openapi?.description,operationId:l.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:Oe(l),requestBody:Ci(l),responses:Pe(l.metadata?.openapi?.responses)}}))})}return{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:n,security:[{apiKeyCookie:[]}],servers:[{url:e.baseURL}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:Ce}}var yi=`<svg width="75" height="75" viewBox="0 0 75 75" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect width="75" height="75" fill="url(#pattern0_21_12)"/>
<defs>
<pattern id="pattern0_21_12" patternContentUnits="objectBoundingBox" width="1" height="1">
<use xlink:href="#image0_21_12" transform="scale(0.00094697)"/>
</pattern>
<image id="image0_21_12" width="1056" height="1056" xlink:href="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBARXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAEIKADAAQAAAABAAAEIAAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/+ICKElDQ19QUk9GSUxFAAEBAAACGGFwcGwEAAAAbW50clJHQiBYWVogB+YAAQABAAAAAAAAYWNzcEFQUEwAAAAAQVBQTAAAAAAAAAAAAAAAAAAAAAAAAPbWAAEAAAAA0y1hcHBs7P2jjjiFR8NttL1PetoYLwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKZGVzYwAAAPwAAAAwY3BydAAAASwAAABQd3RwdAAAAXwAAAAUclhZWgAAAZAAAAAUZ1hZWgAAAaQAAAAUYlhZWgAAAbgAAAAUclRSQwAAAcwAAAAgY2hhZAAAAewAAAAsYlRSQwAAAcwAAAAgZ1RSQwAAAcwAAAAgbWx1YwAAAAAAAAABAAAADGVuVVMAAAAUAAAAHABEAGkAcwBwAGwAYQB5ACAAUAAzbWx1YwAAAAAAAAABAAAADGVuVVMAAAA0AAAAHABDAG8AcAB5AHIAaQBnAGgAdAAgAEEAcABwAGwAZQAgAEkAbgBjAC4ALAAgADIAMAAyADJYWVogAAAAAAAA9tUAAQAAAADTLFhZWiAAAAAAAACD3wAAPb////+7WFlaIAAAAAAAAEq/AACxNwAACrlYWVogAAAAAAAAKDgAABELAADIuXBhcmEAAAAAAAMAAAACZmYAAPKnAAANWQAAE9AAAApbc2YzMgAAAAAAAQxCAAAF3v//8yYAAAeTAAD9kP//+6L///2jAAAD3AAAwG7/wAARCAQgBCADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9sAQwACAgICAgIDAgIDBAMDAwQFBAQEBAUHBQUFBQUHCAcHBwcHBwgICAgICAgICgoKCgoKCwsLCwsNDQ0NDQ0NDQ0N/9sAQwECAgIDAwMGAwMGDQkHCQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0N/90ABABC/9oADAMBAAIRAxEAPwD9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9b9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//V/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Ln/gq38a/in8Dvgp4T8R/CfxFdeG9SvvFMdlcXFoELyW5srqQxnzEcY3op4Gciv1Gr8Z/+C2X/JvXgj/sc4v/AE33lAH4z/8ADwv9tD/oq2tf9823/wAZo/4eF/tof9FW1r/vm2/+M18Z0UAfZn/Dwv8AbQ/6KtrX/fNt/wDGaP8Ah4X+2h/0VbWv++bb/wCM18Z0UAfZn/Dwv9tD/oq2tf8AfNt/8Zo/4eF/tof9FW1r/vm2/wDjNfGdFAH2Z/w8L/bQ/wCira1/3zbf/GaP+Hhf7aH/AEVbWv8Avm2/+M18Z0UAfZn/AA8L/bQ/6KtrX/fNt/8AGaP+Hhf7aH/RVta/75tv/jNfGdFAH2Z/w8L/AG0P+ira1/3zbf8Axmj/AIeF/tof9FW1r/vm2/8AjNfGdFAH63/sVftq/tTfEb9qb4deCfG3xF1TVtD1bVGgvbKdYBHPGIJW2ttiVsblB4I6V/UbX8Z//BPT/k9D4U/9hpv/AEmmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+M/wD4eF/tof8ARVta/wC+bb/4zR/w8L/bQ/6KtrX/AHzbf/Ga+M6KAPsz/h4X+2h/0VbWv++bb/4zR/w8L/bQ/wCira1/3zbf/Ga+M6KAPsz/AIeF/tof9FW1r/vm2/8AjNH/AA8L/bQ/6KtrX/fNt/8AGa+M6KAPsz/h4X+2h/0VbWv++bb/AOM0f8PC/wBtD/oq2tf9823/AMZr4zooA+zP+Hhf7aH/AEVbWv8Avm2/+M0f8PC/20P+ira1/wB823/xmvjOigD7M/4eF/tof9FW1r/vm2/+M0f8PC/20P8Aoq2tf9823/xmvjOigD7M/wCHhf7aH/RVta/75tv/AIzR/wAPC/20P+ira1/3zbf/ABmvjOigD7M/4eF/tof9FW1r/vm2/wDjNH/Dwv8AbQ/6KtrX/fNt/wDGa+M6KAPsz/h4X+2h/wBFW1r/AL5tv/jNH/Dwv9tD/oq2tf8AfNt/8Zr4zooA+zP+Hhf7aH/RVta/75tv/jNH/Dwv9tD/AKKtrX/fNt/8Zr4zooA+zP8Ah4X+2h/0VbWv++bb/wCM0f8ADwv9tD/oq2tf9823/wAZr4zooA+zP+Hhf7aH/RVta/75tv8A4zR/w8L/AG0P+ira1/3zbf8AxmvjOigD7M/4eF/tof8ARVta/wC+bb/4zR/w8L/bQ/6KtrX/AHzbf/Ga+M6KAP6tv+CUnxr+Kfxx+CnizxH8WPEV14k1Kx8UyWVvcXYQPHbiytZBGPLRBje7HkZya/Uavxn/AOCJv/JvXjf/ALHOX/032dfsxQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfxn/APBPT/k9D4U/9hpv/Saav7MKACiiigAooooAKKKKACiiigAooooAKKKKAP4A6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfwq/BT4r638Dvin4d+LHhy0tb7UvDd0bu3t70ObeRzG0eJBGyPjDnowOa/Ub/h9l+0L/ANCR4M/79ah/8m0Af0yUV/M3/wAPsv2hf+hI8Gf9+tQ/+TaP+H2X7Qv/AEJHgz/v1qH/AMm0Af0yUV/M3/w+y/aF/wChI8Gf9+tQ/wDk2j/h9l+0L/0JHgz/AL9ah/8AJtAH9MlFfzN/8Psv2hf+hI8Gf9+tQ/8Ak2j/AIfZftC/9CR4M/79ah/8m0Af0yUV/M3/AMPsv2hf+hI8Gf8AfrUP/k2j/h9l+0L/ANCR4M/79ah/8m0Af0yUV/M3/wAPsv2hf+hI8Gf9+tQ/+TaP+H2X7Qv/AEJHgz/v1qH/AMm0Af0yUV/M3/w+y/aF/wChI8Gf9+tQ/wDk2j/h9l+0L/0JHgz/AL9ah/8AJtAH4z0V/TJ/w5N/Z6/6Hfxn/wB/dP8A/kKj/hyb+z1/0O/jP/v7p/8A8hUAfzN0V/TJ/wAOTf2ev+h38Z/9/dP/APkKj/hyb+z1/wBDv4z/AO/un/8AyFQB/M3RX9Mn/Dk39nr/AKHfxn/390//AOQqP+HJv7PX/Q7+M/8Av7p//wAhUAfzN0V/TJ/w5N/Z6/6Hfxn/AN/dP/8AkKj/AIcm/s9f9Dv4z/7+6f8A/IVAH8zdFf0yf8OTf2ev+h38Z/8Af3T/AP5Co/4cm/s9f9Dv4z/7+6f/APIVAH8zdFf0yf8ADk39nr/od/Gf/f3T/wD5Co/4cm/s9f8AQ7+M/wDv7p//AMhUAfzN0V/TJ/w5N/Z6/wCh38Z/9/dP/wDkKvwV/ag+FGifA74++M/hP4cu7q+03w3fi0t7i9KG4kQxRyZkMaomcueigYoA8FooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/AOxzl/8ATfZ1+zFfjP8A8ETf+TevG/8A2Ocv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/v8ooooAKKKKACiiigAooooAKKKKACiiigAr+M//goX/wAnofFb/sNL/wCk0Nf2YV/Gf/wUL/5PQ+K3/YaX/wBJoaAPjOiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP7/KKKKACiiigAooooAKKKKACiiigAooooAK/jP/4KF/8AJ6HxW/7DS/8ApNDX9mFfxn/8FC/+T0Pit/2Gl/8ASaGgD4zooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+/yiiigAooooAKKKKACiiigAooooAKKKKACv4z/+Chf/ACeh8Vv+w0v/AKTQ1/ZhX8Z//BQv/k9D4rf9hpf/AEmhoA+M6KKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/v8ooooAKKKKACiiigAooooAKKKKACiiigAr+M//goX/wAnofFb/sNL/wCk0Nf2YV/Gf/wUL/5PQ+K3/YaX/wBJoaAPjOiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP7/KKKKACiiigAooooAKKKKACiiigAooooAK/jP/4KF/8AJ6HxW/7DS/8ApNDX9mFfxn/8FC/+T0Pit/2Gl/8ASaGgD4zooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+/yiiigAooooAKKKKACiiigAooooAKKKKACv4z/+Chf/ACeh8Vv+w0v/AKTQ1/ZhX8Z//BQv/k9D4rf9hpf/AEmhoA+M6KKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD1L4KfCjW/jj8U/Dvwn8OXdrY6l4kujaW9xelxbxuI2kzIY1d8YQ9FJzX6jf8OTf2hf8Aod/Bn/f3UP8A5Cr4z/4J6f8AJ6Hwp/7DTf8ApNNX9mFAH8zf/Dk39oX/AKHfwZ/391D/AOQqP+HJv7Qv/Q7+DP8Av7qH/wAhV/TJRQB/M3/w5N/aF/6HfwZ/391D/wCQqP8Ahyb+0L/0O/gz/v7qH/yFX9MlFAH8zf8Aw5N/aF/6HfwZ/wB/dQ/+QqP+HJv7Qv8A0O/gz/v7qH/yFX9MlFAH8zf/AA5N/aF/6HfwZ/391D/5Co/4cm/tC/8AQ7+DP+/uof8AyFX9MlFAH8zf/Dk39oX/AKHfwZ/391D/AOQqP+HJv7Qv/Q7+DP8Av7qH/wAhV/TJRQB/M3/w5N/aF/6HfwZ/391D/wCQqP8Ahyb+0L/0O/gz/v7qH/yFX9MlFAH4z/8AD7L9nr/oSPGf/frT/wD5No/4fZfs9f8AQkeM/wDv1p//AMm1/M3RQB/TJ/w+y/Z6/wChI8Z/9+tP/wDk2j/h9l+z1/0JHjP/AL9af/8AJtfzN0UAf0yf8Psv2ev+hI8Z/wDfrT//AJNo/wCH2X7PX/QkeM/+/Wn/APybX8zdFAH9Mn/D7L9nr/oSPGf/AH60/wD+TaP+H2X7PX/QkeM/+/Wn/wDybX8zdFAH9Mn/AA+y/Z6/6Ejxn/360/8A+TaP+H2X7PX/AEJHjP8A79af/wDJtfzN0UAf0yf8Psv2ev8AoSPGf/frT/8A5No/4fZfs9f9CR4z/wC/Wn//ACbX8zdFAH9Mn/D7L9nr/oSPGf8A360//wCTa/BX9qD4r6J8cfj74z+LHhy0urHTfEl+Lu3t70ILiNBFHHiQRs6Zyh6MRivBaKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/ACb143/7HOX/ANN9nX7MV+M//BE3/k3rxv8A9jnL/wCm+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfxn/APBPT/k9D4U/9hpv/Saav7MKACiiigAooooAKKKKACiiigAooooAKKKKAP4A6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+XP/BVv4KfFP44/BTwn4c+E/h268SalY+KY724t7QoHjtxZXUZkPmOgxvdRwc5NAH8pNFfZn/DvT9tD/olOtf99W3/AMeo/wCHen7aH/RKda/76tv/AI9QB8Z0V9mf8O9P20P+iU61/wB9W3/x6j/h3p+2h/0SnWv++rb/AOPUAfGdFfZn/DvT9tD/AKJTrX/fVt/8eo/4d6ftof8ARKda/wC+rb/49QB8Z0V9mf8ADvT9tD/olOtf99W3/wAeo/4d6ftof9Ep1r/vq2/+PUAfGdFfZn/DvT9tD/olOtf99W3/AMeo/wCHen7aH/RKda/76tv/AI9QB8Z0V9mf8O9P20P+iU61/wB9W3/x6j/h3p+2h/0SnWv++rb/AOPUAH/BPT/k9D4U/wDYab/0mmr+zCv5cv2Kv2Kv2pvhz+1N8OvG3jb4dappOh6TqjT3t7O0BjgjMEq7m2ys2NzAcA9a/qNoAKKKKACiiigAooooAKKKKACiiigAooooA/gDor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD9mP+CJv/JvXjf8A7HOX/wBN9nX7MV+XP/BKT4KfFP4HfBTxZ4c+LHh268N6lfeKZL23t7soXktzZWsYkHlu4xvRhyc5FfqNQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9b9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//V/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9f9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/2Q=="/>
</defs>
</svg>
`;var Tt=e=>`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(e)}
    </script>
	 <script>
      var configuration = {
	  	favicon: "data:image/svg+xml;utf8,${encodeURIComponent(yi)}",
	   	theme: "saturn",
        metaData: {
			title: "Better Auth API",
			description: "API Reference for your Better Auth Instance",
		}
      }

      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`,kt=e=>{let o=e?.path??"/reference";return{id:"open-api",endpoints:{generateOpenAPISchema:C("/open-api/generate-schema",{method:"GET"},async i=>{let t=await Ze(i.context,i.context.options);return i.json(t)}),openAPIReference:C(o,{method:"GET",metadata:{isAction:!1}},async i=>{if(e?.disableDefaultReference)throw new fe.APIError("NOT_FOUND");let t=await Ze(i.context,i.context.options);return new Response(Tt(t),{headers:{"Content-Type":"text/html"}})})}}};0&&(module.exports={openAPI});
